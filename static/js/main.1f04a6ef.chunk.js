(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,n){e.exports=n(238)},122:function(e,t,n){},238:function(e,t,n){"use strict";n.r(t);var s={};n.r(s),n.d(s,"addOrOpenListByNameAction",function(){return _}),n.d(s,"moveInitiationAction",function(){return S}),n.d(s,"moveToListByNameAction",function(){return N}),n.d(s,"moveToListAction",function(){return I}),n.d(s,"copyToListAction",function(){return C}),n.d(s,"importListAction",function(){return j}),n.d(s,"exportListAction",function(){return w}),n.d(s,"checkAndSaveAction",function(){return M}),n.d(s,"planWeekAction",function(){return x}),n.d(s,"dataConflictAction",function(){return R}),n.d(s,"errorAction",function(){return P}),n.d(s,"setMode",function(){return H}),n.d(s,"reloadListOfLists",function(){return B}),n.d(s,"reloadAList",function(){return K}),n.d(s,"openAList",function(){return F}),n.d(s,"collectPastDays",function(){return q}),n.d(s,"startup",function(){return G}),n.d(s,"deleteAList",function(){return z});var a={};n.r(a),n.d(a,"newListAction",function(){return V}),n.d(a,"updateListAction",function(){return X}),n.d(a,"refreshListAction",function(){return Y}),n.d(a,"getListOfLists",function(){return $}),n.d(a,"getAList",function(){return Q});var r={};n.r(r),n.d(r,"setStatusMessage",function(){return Z});var i={};n.r(i),n.d(i,"setSelectedList",function(){return ee});var o={};n.r(o),n.d(o,"selectSelectedTask",function(){return ge}),n.d(o,"selectCurrentMode",function(){return Le}),n.d(o,"selectPreviousList",function(){return be});var c={};n.r(c),n.d(c,"selectListOfLists",function(){return Ae}),n.d(c,"selectAListById",function(){return ve}),n.d(c,"selectAList",function(){return ke}),n.d(c,"selectMutableLists",function(){return De}),n.d(c,"selectImmutableLists",function(){return Te}),n.d(c,"selectExportables",function(){return _e}),n.d(c,"getFilteredListOfLists",function(){return Se}),n.d(c,"findLegacyExists",function(){return Ne});var l={};n.r(l),n.d(l,"getCurrentMessage",function(){return Ie});var u=n(0),d=n.n(u),p=n(56),m=n(11);var h,f={devHost:"https://akvaratodo-flask-api.herokuapp.com/",apiHost:"https://akvaratodo-flask-api.herokuapp.com/",separatorString:"..................",listsAddon:"lists",settingsAddon:"settings",user:{id:1,name:"akvara",settings:{openListIfExists:"Current",addNewAt:4,displayListLength:15,displayDoneLength:3,displayLast:2}},statusNode:document.getElementById("status"),userNode:document.getElementById("user"),appNode:document.getElementById("app"),footerNode:document.getElementById("footer"),clickSound:"https://www.soundjay.com/buttons/button-20.mp3",version:"0326-15"},g=n(12),L=n(8),b=(n(122),function(){return u.createElement("div",{className:"spinner"},"Loading...")});!function(e){e.MODE_LOADING="LOADING",e.MODE_ERROR="ERROR",e.MODE_LIST_OF_LISTS="LIST_OF_LISTS",e.MODE_A_LIST="A_LIST",e.MODE_MOVE="MOVE",e.DATA_CONFLICT="DATA_CONFLICT"}(h||(h={}));var y,O={maxTaskLength:180,collectDaysBefore:7},E={msgHello:"Hello!",msgPlanAWeek:"Planing a week ...",msgChecking:"Checking ...",msgAdding:"Adding ...",msgSaved:"Saved.",msgMoved:"Item moved.",msgCopied:"Item copied.",msgExported:"List exported.",msgImported:"List imported.",msgAddedAndRefreshed:"Item added and list refreshed.",msgDataConflict:"Data conflict.",msgLoadingLists:"Loading lists ...",msgLoadingAList:"Loading a list ...",msgListsLoaded:"Lists loaded.",msgTodaysLoaded:"Today's list loaded.",msgLoaded:" loaded.",msgCreatingAList:"Creating a list: ",msgDeletingAList:"Deleting a list ...",msgListDeleted:"List removed.",msgWeekPlanned:"A week ahead added."},A=function(e){var t=e.msg,n=e.openAListRequest,s=e.aList;return u.createElement("div",null,u.createElement("br",null),t,u.createElement("br",null),"Please ",u.createElement("button",{onClick:function(){return n(s.id)}},"reload"))},v=n(25),k=n.n(v),D={appName:"app"},T=Object(v.actionCreatorFactory)(D.appName+"/app"),_=T("ADD_OR_OPEN_LIST"),S=T("MOVE_INITIATED"),N=T("MOVE_BY_NAME"),I=T("MOVE_TO"),C=T("COPY_TO"),j=T("IMPORT_LIST"),w=T("EXPORT_LIST"),M=T("CHECK_AND_SAVE"),x=T("PLAN_WEEK"),R=T("DATA_CONFLICT"),P=T("ERROR"),H=T("SET_MODE"),B=T("RELOAD_LISTS"),K=T("RELOAD_A_LIST"),F=T("OPEN_A_LIST"),q=T("COLLECT_PAST"),G=T("STARTUP"),z=T("DELETE_A_LIST"),J=Object(g.a)(Object(g.b)({msg:"Ooops, something went wrong..."}),Object(m.b)(function(e){return{aList:e.app.aList}},function(e){return Object(L.b)({openAListRequest:F},e)}))(A),W=n(242),U=Object(v.actionCreatorFactory)(D.appName+"/list"),V=U.async("NEW_LIST"),X=U.async("UPDATE_LIST"),Y=U.async("REFRESH_LIST"),$=U.async("GET_LIST_OF_LISTS"),Q=U.async("GET_A_LIST"),Z=Object(v.actionCreatorFactory)(D.appName+"/status")("SET_STATUS_MESSAGE"),ee=k()(D.appName+"/selected")("SET_SELECTED_LIST"),te=n(73),ne=n.n(te),se=function(e){ne()(document).on("keypress",function(t){return e(t)})},ae=function(){ne()(document).off("keypress")},re=function(){document.getElementById("clickSound").play()},ie=n(240),oe=n(239);!function(e){e.listsFilter="listsFilter"}(y||(y={}));var ce=Object(g.a)(Object(oe.a)({form:y.listsFilter,initialValues:{searchInput:""}}))(function(e){var t=e.pageHotKeys;return u.createElement(ie.a,{className:"list-input",name:"searchInput",placeholder:"",component:"input",onFocus:ae.bind(void 0),onBlur:se.bind(void 0,t)})});const le=["Sekmadien\u012f","Pirmadien\u012f","Antradien\u012f","Tre\u010diadien\u012f","Ketvirtadien\u012f","Penktadien\u012f","\u0160e\u0161tadien\u012f"],ue=["sausio","vasario","kovo","baland\u017eio","gegu\u017e\u0117s","bir\u017eelio","liepos","rugpj\u016b\u010dio","rugs\u0117jo","spalio","lapkri\u010dio","gruod\u017eio"];var de=function(e){return le[e.getDay()]+", "+ue[e.getMonth()]+" "+e.getDate()+" d."},pe=function(e){return le[e.getDay()].toLowerCase()},me=function(e){return ue[e.getMonth()]},he=function(e){return e.getDate()},fe=Object(g.a)(Object(g.d)({moveHandler:function(e){var t=e.moveToList,n=e.fromList,s=e.task;return function(e){t({fromListId:n.listId,toListId:e,task:s})}},copyHandler:function(e){var t=e.copyToAList,n=e.task;return function(e){t({toListId:e,task:n})}},moveToNewListHandler:function(e){var t=e.moveToListByName,n=e.fromList,s=e.task,a=e.newListName;return function(){t({fromListId:n.listId,task:s,listName:a,move:!0})}},moveToTomorrowHandler:function(e){var t=e.moveToListByName,n=e.fromList,s=e.task;return function(){t({fromListId:n.listId,task:s,listName:de(new Date((new Date).setDate((new Date).getDate()+1))),move:!0,backToOldList:!0})}},copyToNewListHandler:function(e){var t=e.moveToListByName,n=e.fromList,s=e.task,a=e.newListName;return function(){t({fromListId:n.listId,task:s,listName:a,move:!1})}},backHandler:function(e){var t=e.openAList,n=e.fromList;return function(){t(n.listId)}},reloadHandler:function(e){var t=e.reloadListOfListsPage;return function(){t()}}}),Object(g.e)(function(e){var t=e.reloadHandler,n=e.backHandler;return{pageHotKeys:function(e){var s=String.fromCharCode(e.which);return"r"===s?(e.preventDefault(),re(),void t()):"<"===s?(e.preventDefault(),re(),void n()):void 0}}}),Object(g.c)({componentDidMount:function(){se(this.props.pageHotKeys)},componentWillUnmount:function(){ae()}}))(function(e){var t=e.task,n=e.newListName,s=e.tomorrowListName,a=e.lists,r=e.fromList,i=e.moveToNewListHandler,o=e.moveToTomorrowHandler,c=e.copyToNewListHandler,l=e.moveHandler,d=e.copyHandler,p=e.backHandler,m=e.reloadHandler,h=e.pageHotKeys;return u.createElement(u.Fragment,null,u.createElement("hr",null),u.createElement("h2",null,t.substring(0,O.maxTaskLength)),u.createElement("hr",null),u.createElement("button",{onClick:p},"<"," Back to ",r.name)," ",u.createElement("button",{onClick:m},u.createElement("span",{className:"glyphicon glyphicon-refresh","aria-hidden":"true"})," ",u.createElement("u",null,"R"),"eload")," ",u.createElement("button",{onClick:o},s),u.createElement("hr",null),u.createElement(ce,{pageHotKeys:h}),u.createElement("button",{disabled:!n,onClick:i},"Move to new list")," ",u.createElement("button",{disabled:!n,onClick:c},"Copy to new list"),u.createElement("hr",null),u.createElement("table",{className:"table table-hover"},u.createElement("tbody",null,a.map(function(e){return e.id===r.listId?null:u.createElement("tr",{key:"tr"+e.id},u.createElement("td",null,"To: ",u.createElement("strong",null,e.name)),u.createElement("td",null,u.createElement("button",{onClick:function(){return l(e.id)}},"Move")," ",u.createElement("button",{onClick:function(){return d(e.id)}},"Copy")))}))))}),ge=function(e){return e.app.task},Le=function(e){return e.app.mode},be=function(e){return e.app.fromList&&e.app.aList.id===e.app.fromList.listId?null:e.app.fromList},ye=n(109),Oe=function(e,t){if(!t)return e;var n,s,a,r=t.filter(function(t){return t.listName===e});return r.length?(n=e,s=r[0].key,-1===(a=n.toLowerCase().indexOf(s))?n:d.a.createElement("span",null,n.substring(0,a),d.a.createElement("u",null,n.substring(a,a+1)),n.substring(a+1,n.length))):e},Ee=function(){return Array.from({length:O.collectDaysBefore},function(e,t){return de(new Date(Date.now()-864e5*(t+1)))})},Ae=function(e){return e.app.lists},ve=function(e){return function(t){return t.app.lists.find(function(t){return t.id===e})||null}},ke=function(e){return e.app.aList},De=function(e){return e.app.lists.filter(function(e){return!e.immutable})},Te=function(e){return e.app.lists.filter(function(e){return e.immutable})},_e=function(e){return e.app.lists.filter(function(t){return t.id!==e.app.aList.id&&!t.immutable}).slice(0,20)},Se=Object(ye.a)([De,Object(W.a)(y.listsFilter)],function(e,t){return t?e.filter(function(e){return n=e.name,s=t.searchInput,void 0===n&&(n=""),n.toLocaleLowerCase().indexOf(s.toLocaleLowerCase())>-1;var n,s}):e}),Ne=function(e){return e.app.lists.some(function(e){return Ee().includes(e.name)})},Ie=function(e){return e.status.message},Ce=Object(L.d)(Object(m.b)(function(e){var t=Object(W.a)(y.listsFilter)(e);return{lists:c.getFilteredListOfLists(e),task:o.selectSelectedTask(e),fromList:e.app.fromList,newListName:t?t.searchInput:"",tomorrowListName:de(new Date((new Date).setDate((new Date).getDate()+1)))}},function(e){return Object(L.b)({openAList:s.openAList,moveToListByName:s.moveToListByNameAction,moveToList:s.moveToListAction,copyToAList:s.copyToListAction,reloadListOfListsPage:s.reloadListOfLists},e)}))(fe),je=n(5),we=n(4),Me=n.n(we),xe=n(31),Re=n.n(xe);const Pe=(e,t,n)=>n?e.sort(function(e,n){return e[t]>n[t]?-1:1}):e.sort(function(e,n){return e[t]<n[t]?-1:1}),He=(e,t,n,s)=>{let a=e[n];return e.splice(n,1),{A:e,B:t=s?Re.a.unique([a].concat(t)):Re.a.unique(t.concat([a]))}},Be=(e,t)=>{let n=e[t];return e.splice(t,1),e.concat([n])},Ke=(e,t)=>{let n=e[t];return e.splice(t,1),[n].concat(e)},Fe=(e,t,n)=>{let s=e[t];return e.splice(t,1),e.splice(n,0,s),e},qe=(e,t)=>(e.splice(t,1),e),Ge=(e,t)=>JSON.stringify(Re.a.unique(JSON.parse(e).concat(JSON.parse(t)))),ze=(e,t)=>JSON.stringify(Re.a.unique([e].concat(JSON.parse(t)))),Je=(e,t)=>JSON.stringify(JSON.parse(t).filter(t=>t!==e)),We=(e,t)=>t.length>f.user.settings[e],Ue=e=>Xe(e).substr(0,10),Ve=e=>Xe(e).substr(11,5),Xe=e=>new Date(new Date(e).toString().replace(/GMT.*/g,"")+" UTC").toISOString();var Ye,$e,Qe,Ze,et,tt,nt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contractedListItemHeader=function(e,n){var s="glyphicon-minus";return e.isContracted&&(s="glyphicon-plus"),d.a.createElement("tr",{key:"tr"+n},d.a.createElement("td",{colSpan:2,onClick:t.props.toggleContracted.bind(t,e.contractedTitle,!e.isContracted)},d.a.createElement("span",{className:"glyphicon list-item list-item-glyph glyphicon "+s,"aria-hidden":"true"}),e.contractedTitle),d.a.createElement("td",{className:"right-align"},d.a.createElement("strong",null,e.list.length)))},t.contractedListItems=function(e){return e.isContracted?null:e.list.map(t.displayIndentedListRow)},t.contractedList=function(e,n){return[t.contractedListItemHeader(e,n),t.contractedListItems(e,n)]},t.displayIndentedListRow=function(e,n){var s=t.prepareListForDisplaying(e);return s.indent=!0,t.displayListRow(s,n)},t.displayListRow=function(e,n){return d.a.createElement("tr",{key:"tr"+n},d.a.createElement("td",{className:e.itemClass,onClick:e.action},e.indent&&d.a.createElement("span",{className:"glyphicon list-item list-item-glyph","aria-hidden":"true"}," "),d.a.createElement("span",{className:"glyphicon list-item list-item-glyph glyphicon-folder-open","aria-hidden":"true"}),e.name),d.a.createElement("td",{className:"actions"},e.deletable&&d.a.createElement("span",{className:"glyphicon glyphicon-trash action-button","aria-hidden":"true",onClick:t.props.removeList.bind(t,e.id)})),d.a.createElement("td",{className:"right-align"},"(",d.a.createElement("strong",null,e.noOfTasks),") ",e.updatedDateOrTime))},t.prepareListForDisplaying=function(e){var n={id:e.id,tasks:e.tasks,noOfTasks:e.tasks?JSON.parse(e.tasks).length:0,name:Oe(e.name,t.props.hotKeys),itemClass:"list-item",action:t.props.openList.bind(t,e.id,e.name),deletable:!e.tasks||"[]"===e.tasks&&!e.immutable,updatedDateOrTime:Ue((new Date).toISOString())===Ue(e.updatedAt)?Ve(e.updatedAt):Ue(e.updatedAt)};return e.immutable&&(n.itemClass+=" list-item-immutable"),n},t.displayList=function(e,n){if(e.isList)return t.contractedList(e,n);var s=t.prepareListForDisplaying(e);return t.displayListRow(s,n)},t}return je.__extends(t,e),t.prototype.render=function(){return d.a.createElement("table",{className:"table table-hover"},d.a.createElement("tbody",null,this.props.lists.map(this.displayList)))},t.propTypes={hotKeys:Me.a.array,lists:Me.a.array,openList:Me.a.func.isRequired,removeList:Me.a.func},t}(u.Component),st=function(e){var t=[];e.map(function(e){var n=e.name.indexOf(" - ");if(n>-1){var s=e.name.substring(0,n);t[s]||(t[s]={used:!1,list:[]}),t[s].list.push(e)}return null});var n=[];return e.map(function(e){var s=e.name.indexOf(" - ");if(s>-1){var a=e.name.substring(0,s);t[a].list.length>1?t[a].used||(t[a].used=!0,n.push({isList:!0,isContracted:!0,contractedTitle:a,list:t[a].list})):n.push(e)}else n.push(e);return null}),n},at=function(e){function t(t){var n=e.call(this,t)||this;return n.checkKeyPressed=function(e){var t=String.fromCharCode(e.which);return"a"===t?(re(),e.preventDefault(),void n.listNameInput.focus()):"r"===t||"l"===t?(re(),e.preventDefault(),void n.reload()):"t"===t?(re(),void n.goToday()):"p"===t?(re(),void n.props.planWeek()):">"===t?(re(),void n.props.collectPastDaysRequest()):void n.hotKeys.forEach(function(e){e.key===t&&(re(),this.openAList(e.listId))}.bind(n))},n.addHotKeys=function(){n.state.lists.forEach(function(e){if(!e.isList){var t=n.findFreeKey(e.name);t&&n.hotKeys.push({key:t,listId:e.id,listName:e.name})}})},n.keyIsNotOccupied=function(e){return!n.hotKeys.filter(function(t){return t.key===e}).length},n.findFreeKey=function(e){for(var t=0,s=e.length;t<s;t++){var a=e[t].toLowerCase();if(-1!=="abcdefghijklmnopqrstuvwxyz".indexOf(a)&&n.keyIsNotOccupied(a))return a}return null},n.reload=function(){n.props.startupRequest()},n.onNameChange=function(e){n.setState({listName:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),n.props.addOrOpenAList({listName:n.state.listName})},n.openAList=function(e){n.props.getAListRequest(e)},n.toggleContracted=function(e,t){var s=n.state.lists.map(function(n){return n.isList&&n.contractedTitle===e?je.__assign({},n,{isContracted:t}):n});n.setState({lists:s})},n.removeList=function(e){n.props.removeList(e)},n.handleKeyDownAtListInput=function(e){27===e.keyCode&&(n.listNameInput.blur(),n.setState({listName:""}))},n.goToday=function(){return n.props.addOrOpenAList({listName:de(new Date)})},n.state={lists:st(t.lists.filter(function(e){return!e.immutable})),immutableLists:t.lists.filter(function(e){return e.immutable}),listName:""},n.hotKeys=[{key:"a"},{key:"r"},{key:"l"},{key:"t"},{key:"p"},{key:">"}],n}return je.__extends(t,e),t.prototype.componentWillUnmount=function(){ae()},t.prototype.componentDidMount=function(){document.title="ToDo lists",se(this.checkKeyPressed.bind(this))},t.prototype.render=function(){var e=this;return this.addHotKeys(),u.createElement("div",null,u.createElement("table",{width:"100%"},u.createElement("tbody",null,u.createElement("tr",null,u.createElement("td",null,u.createElement("h1",null,"Lists")),u.createElement("td",{className:"right-align"},this.props.legacyExists&&u.createElement("span",null,u.createElement("button",{onClick:this.props.collectPastDaysRequest}," >> T")," "),u.createElement("button",{onClick:this.goToday},u.createElement("u",null,"T"),"oday"))))),u.createElement(nt,{lists:this.state.lists,openList:this.openAList,toggleContracted:this.toggleContracted,removeList:this.removeList,hotKeys:this.hotKeys}),u.createElement("h3",null,"Protected"),u.createElement(nt,{lists:this.state.immutableLists,openList:this.openAList}),u.createElement("form",{onSubmit:this.handleSubmit},u.createElement("input",{className:"list-input",ref:function(t){e.listNameInput=t},value:this.state.listName,onFocus:ae.bind(this),onBlur:se.bind(this,this.checkKeyPressed),onKeyDown:this.handleKeyDownAtListInput,onChange:this.onNameChange}),u.createElement("button",{disabled:!this.state.listName.trim()},"Create new list")),u.createElement("hr",null),u.createElement("button",{onClick:this.props.planWeek},u.createElement("u",null,"P"),"lan week"),u.createElement("button",{onClick:this.reload},u.createElement("span",{className:"glyphicon glyphicon-refresh","aria-hidden":"true"})," ",u.createElement("u",null,"R"),"eload"))},t}(u.PureComponent),rt=Object(g.a)(Object(m.b)(function(e){return{lists:c.selectListOfLists(e),legacyExists:c.findLegacyExists(e)}},function(e){return Object(L.b)({getAListRequest:s.openAList,startupRequest:s.startup,removeList:s.deleteAList,addOrOpenAList:s.addOrOpenListByNameAction,planWeek:s.planWeekAction,collectPastDaysRequest:s.collectPastDays},e)}))(at),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return je.__extends(t,e),t.prototype.hightlightOnDemand=function(e,t){return this.props.highlightIndex===t?u.createElement("strong",null,e):u.createElement("span",null,e)},t.prototype.processTaskText=function(e){null===e&&(e="null");var t=e.substring(0,O.maxTaskLength),n=t;return"http"===e.substring(0,4)?("/"===(t=t.substr(t.indexOf("://")+3))[t.length-1]&&(t=t.substr(0,t.length-1)),n=u.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)):("["===e.substring(0,1)&&(n=u.createElement("span",null,u.createElement("span",{className:"glyphicon glyphicon-folder-open list-first-item","aria-hidden":"true",onClick:this.props.openListByName.bind(this,e.substring(1))}),t.substring(1))),n)},t.prototype.displayTask=function(e,t,n){if(e===f.separatorString)return u.createElement("tr",{key:"tr"+t},u.createElement("td",null,u.createElement("div",{className:"task-row separator-row"},u.createElement("div",null,f.separatorString),u.createElement("div",{className:"right-align"},f.separatorString))));var s=t;s>=f.user.settings.displayListLength-f.user.settings.displayLast&&(s=t+n);var a=this.processTaskText(e);return this.props.immutable?u.createElement("tr",{key:"tr"+t},u.createElement("td",null,a)):u.createElement("tr",{key:"tr"+t},u.createElement("td",null,u.createElement("div",{className:"task-row"},u.createElement("span",{className:"glyphicon glyphicon-unchecked action-button","aria-hidden":"true",onClick:this.props.done.bind(this,s)}),u.createElement("div",{className:"task-description"},u.createElement("span",{className:"list-item task"},this.hightlightOnDemand(a,s))),u.createElement("div",null,u.createElement("span",{className:"glyphicon glyphicon-trash delete-button","aria-hidden":"true",onClick:this.props.delete.bind(this,s)}),u.createElement("span",{className:"list-item"}," "),u.createElement("span",{className:"glyphicon glyphicon-arrow-down action-button","aria-hidden":"true",onClick:this.props.procrastinate.bind(this,s)}),u.createElement("span",{className:"glyphicon glyphicon-arrow-up action-button","aria-hidden":"true",onClick:this.props.toTop.bind(this,s)}),u.createElement("span",{className:"glyphicon glyphicon-random action-button","aria-hidden":"true",onClick:this.props.move.bind(this,e)}),u.createElement("span",{className:"glyphicon glyphicon-thumbs-down action-button","aria-hidden":"true",onClick:this.props.postpone.bind(this,s)})))))},t.prototype.render=function(){var e=this,t=this.props.items,n=0;return!this.props.expand&&We("displayListLength",this.props.items)&&(n=this.props.items.length-f.user.settings.displayListLength,t=this.props.items.slice(0,f.user.settings.displayListLength-f.user.settings.displayLast-1).concat([f.separatorString]).concat(this.props.items.slice(-f.user.settings.displayLast))),u.createElement("table",{className:"table table-condensed table-hover"},u.createElement("tbody",null,t.map(function(t,s){return e.displayTask(t,s,n)})))},t.propTypes={items:Me.a.array.isRequired,done:Me.a.func.isRequired,delete:Me.a.func.isRequired,toTop:Me.a.func.isRequired,move:Me.a.func.isRequired,procrastinate:Me.a.func.isRequired,postpone:Me.a.func.isRequired,openListByName:Me.a.func.isRequired,highlightIndex:Me.a.number},t}(u.Component),ot=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayTask=function(e,n){return!t.props.expand&&n<t.props.items.length-f.user.settings.displayDoneLength?null:u.createElement("tr",{key:"tr"+n},u.createElement("td",null,u.createElement("span",{className:"glyphicon glyphicon-ok action-button","aria-hidden":"true",onClick:t.props.undone.bind(t,n)}),u.createElement("span",{className:"list-item task done"},e.substring(0,O.maxTaskLength))))},t}return je.__extends(t,e),t.prototype.render=function(){return u.createElement("div",null,!this.props.expand&&We("displayDoneLength",this.props.items)&&f.separatorString,u.createElement("table",{className:"table table-sm table-condensed table-hover"},u.createElement("tbody",null,this.props.items.map(this.displayTask))))},t.propTypes={items:Me.a.array.isRequired,expand:Me.a.bool},t}(u.Component),ct=function(e){function t(t){var n=e.call(this,t)||this;return n.calculatePostponePosition=function(e){return Math.floor(e/2)},n.expand=function(e){var t;n.setState(((t={})[e]=!n.state[e],t))},n.doneTask=function(e){var t=He(n.state.itemsToDo,n.state.itemsDone,e,!1),s=t.A,a=t.B,r=n.prepareClone({itemsToDo:s,itemsDone:a});n.setState({lastAction:r.lastAction,itemsToDo:r.itemsToDo,itemsDone:r.itemsDone,highlightIndex:null}),n.props.checkAndSave(n.serialize(r))},n.unDoneTask=function(e){var t=He(n.state.itemsDone,n.state.itemsToDo,e,!0),s=n.prepareClone({itemsToDo:t.B,itemsDone:t.A});n.setState({lastAction:s.lastAction,itemsToDo:s.itemsToDo,itemsDone:s.itemsDone,highlightIndex:0}),n.props.checkAndSave(n.serialize(s))},n.clearDone=function(){var e=n.prepareClone({itemsDone:[]});n.setState({lastAction:e.lastAction,itemsDone:e.itemsDone,highlightIndex:null}),n.props.checkAndSave(n.serialize(e))},n.removeTask=function(e){var t=qe(n.state.itemsToDo,e),s=n.prepareClone({itemsToDo:t});n.setState({lastAction:s.lastAction,itemsToDo:s.itemsToDo,highlightIndex:null}),n.props.checkAndSave(n.serialize(s))},n.toTop=function(e){var t=Ke(n.state.itemsToDo,e),s=n.prepareClone({itemsToDo:t});n.setState({lastAction:s.lastAction,itemsToDo:s.itemsToDo,highlightIndex:0}),n.props.checkAndSave(n.serialize(s))},n.mark=function(){var e=n.prepareClone({immutable:!n.state.immutable});n.setState({lastAction:e.lastAction,immutable:e.immutable,highlightIndex:null}),n.props.checkAndSave(n.serialize(e))},n.moveOutside=function(e){var t={fromList:{listId:n.props.aList.id,name:n.state.listName},task:e};n.props.moveOutside(t)},n.procrastinateTask=function(e){var t=Be(n.state.itemsToDo,e),s=n.prepareClone({itemsToDo:t});n.setState({lastAction:s.lastAction,itemsToDo:s.itemsToDo,highlightIndex:n.state.itemsToDo.length}),n.props.checkAndSave(n.serialize(s))},n.postponeTask=function(e){var t=Fe(n.state.itemsToDo,e,e+n.calculatePostponePosition(n.state.itemsToDo.length)),s=n.prepareClone({itemsToDo:t}),a=Math.min(n.state.itemsToDo.length-1,e+n.calculatePostponePosition(n.state.itemsToDo.length));n.setState({lastAction:s.lastAction,itemsToDo:s.itemsToDo,highlightIndex:a}),n.props.checkAndSave(n.serialize(s))},n.changeListName=function(e){var t=n.prepareClone({name:e.target.value.trim()});n.setState({lastAction:t.lastAction,listName:t.name,listNameOnEdit:!1,highlightIndex:null}),n.props.checkAndSave(n.serialize(t)),se(n.checkKeyPressed.bind(n))},n.listChanger=function(e){n.props.addOrOpenAList({listName:e})},n.reload=function(){n.props.reloadAList(n.props.aList.id)},n.goToday=function(){n.props.addOrOpenAList({listName:de(new Date)})},n.goLists=function(){n.props.startupRequest()},n.goPrevious=function(){n.listChanger(n.props.previousList.name)},n.editListName=function(){n.setState({listNameOnEdit:!0})},n.checkKeyPressed=function(e){switch(String.fromCharCode(e.which)){case"a":re(),e.preventDefault(),n.taskInput.focus();break;case"l":re(),n.goLists();break;case"r":re(),n.reload();break;case"p":re(),n.mark();break;case"t":re(),n.goToday();break;case"<":n.props.previousList.listId&&(re(),n.goPrevious())}},n.handleHeaderSubmit=function(e){e.preventDefault()},n.handleKeyDownAtTask=function(e){27===e.keyCode&&(n.taskInput.blur(),n.setState({task:""}))},n.handleKeyDownAtHeader=function(e){switch(e.key){case"Enter":case"Tab":n.changeListName(e);break;case"Escape":n.setState({listNameOnEdit:!1})}},n.handleSubmit=function(e){e.preventDefault(),n.taskInput.blur();var t=Math.min(n.state.itemsToDo.length,f.user.settings.addNewAt-1),s=n.state.task.replace(/(^\s+|\s+$)/g,""),a=n.state.itemsToDo;a.splice(f.user.settings.addNewAt-1,0,s),a=Re.a.unique(a);var r=n.prepareClone({itemsToDo:a,taskToAdd:s});n.setState({lastAction:r.lastAction,itemsToDo:r.itemsToDo,highlightIndex:t,task:""}),n.props.checkAndSave(n.serialize(r))},n.onChange=function(e){n.setState({task:e.target.value})},n.importList=function(e){n.props.importList({fromListId:e,toListId:n.props.aList.id})},n.exportList=function(e){n.props.exportList({fromListId:n.props.aList.id,toListId:e})},n.makeListOption=function(e){return u.createElement("option",{key:"o-"+e.id,value:e.id},e.name)},n.displayImportBlock=function(){return n.state.immutable?null:u.createElement("select",{className:"import-select",onChange:function(e){e.target.value&&n.importList(e.target.value)}},u.createElement("option",{value:""},"Import list"),n.props.immutables.map(function(e){return n.makeListOption(e)}))},n.displayExportBlock=function(){return n.state.immutable?null:u.createElement("select",{className:"import-select",onChange:function(e){e.target.value&&n.exportList(e.target.value)}},u.createElement("option",{value:""},"Export to"),n.props.exportables.map(function(e){return n.makeListOption(e)}))},n.manageHeader=function(){return n.state.listNameOnEdit?u.createElement("h1",null,u.createElement("form",{onSubmit:n.handleHeaderSubmit},u.createElement("input",{ref:function(e){n.headerInput=e},className:"task-input",defaultValue:n.state.listName,onFocus:ae,onKeyDown:n.handleKeyDownAtHeader,onBlur:n.changeListName}))):u.createElement("div",null,u.createElement("h1",null,n.state.listName)," ",u.createElement("span",{className:"small action-button glyphicon glyphicon glyphicon-pencil","aria-hidden":"true",onClick:n.editListName}))},n.state={listName:t.aList.name,itemsToDo:JSON.parse(t.aList.tasks),itemsDone:t.aList.done?JSON.parse(t.aList.done):[],prepend:t.prepend,highlightIndex:t.prepend?0:null,lastAction:t.aList.lastAction,immutable:t.aList.immutable,task:"",reloadNeeded:!1,listNameOnEdit:!1,expandToDo:!1,expandDone:!1},n}return je.__extends(t,e),t.prototype.componentWillUnmount=function(){ae()},t.prototype.componentDidMount=function(){document.title="ToDo lists",se(this.checkKeyPressed.bind(this))},t.prototype.prepareClone=function(e){return je.__assign({lastAction:(new Date).toISOString(),listId:this.props.aList.id,previousAction:this.state.lastAction},e)},t.prototype.serialize=function(e){var t={listId:e.listId,previousAction:e.previousAction,listData:{lastAction:e.lastAction,immutable:!!e.immutable}};return e.name&&(t.listData.name=e.name),e.itemsToDo&&(t.listData.tasks=JSON.stringify(e.itemsToDo)),e.itemsDone&&(t.listData.done=JSON.stringify(e.itemsDone)),e.taskToAdd&&(t.taskToAdd=e.taskToAdd),t},t.prototype.render=function(){var e=this,t=!!this.state.task.trim(),n=this.state.immutable?u.createElement("span",null,"Un",u.createElement("u",null,"p"),"rotect"):u.createElement("span",null,u.createElement("u",null,"P"),"rotect"),s=this.state.immutable?"screen-shot":"exclamation-sign",a=this.state.expandToDo?"glyphicon-resize-small":"glyphicon-resize-full",r=this.state.expandDone?"glyphicon-resize-small":"glyphicon-resize-full";return u.createElement("div",null,this.manageHeader(),u.createElement("h3",null,"Finished (",this.state.itemsDone.length,")",We("displayDoneLength",this.state.itemsDone)&&u.createElement("span",{className:"small action-button glyphicon "+r,"aria-hidden":"true",onClick:this.expand.bind(this,"expandDone")}),"  ",this.state.itemsDone.length>0&&u.createElement("span",{className:"small action-button glyphicon glyphicon-trash","aria-hidden":"true",onClick:this.clearDone})),u.createElement(ot,{items:this.state.itemsDone,undone:this.unDoneTask,expand:this.state.expandDone}),u.createElement("hr",null),u.createElement("h3",null,"Remaining (",this.state.itemsToDo.length,")",We("displayListLength",this.state.itemsToDo)&&u.createElement("span",{className:"small list-item action-button glyphicon "+a,"aria-hidden":"true",onClick:this.expand.bind(this,"expandToDo")})),u.createElement(it,{items:this.state.itemsToDo,highlightIndex:this.state.highlightIndex,immutable:this.state.immutable,delete:this.removeTask,move:this.moveOutside,toTop:this.toTop,postpone:this.postponeTask,procrastinate:this.procrastinateTask,openListByName:this.listChanger,reloadNeeded:this.state.reloadNeeded,done:this.doneTask,expand:this.state.expandToDo}),!this.state.immutable&&u.createElement("div",null,u.createElement("hr",null),u.createElement("h3",null,"Add new:"),u.createElement("form",{onSubmit:this.handleSubmit},u.createElement("input",{className:"task-input",ref:function(t){e.taskInput=t},value:this.state.task,onFocus:ae,onBlur:function(){return se(e.checkKeyPressed)},onKeyDown:this.handleKeyDownAtTask,onChange:this.onChange}),u.createElement("button",{disabled:!this.state.task.trim()},"Add task"))),u.createElement("hr",null),this.displayImportBlock(),this.displayExportBlock(),u.createElement("br",null),u.createElement("button",{disabled:t,onClick:this.reload},u.createElement("span",{className:"glyphicon glyphicon-refresh","aria-hidden":"true"})," ",u.createElement("u",null,"R"),"eload"),u.createElement("button",{disabled:t,onClick:this.mark},u.createElement("span",{className:"glyphicon glyphicon-"+s,"aria-hidden":"true"})," ",n),u.createElement("button",{disabled:t,onClick:this.goLists},u.createElement("span",{className:"glyphicon glyphicon-tasks","aria-hidden":"true"})," ",u.createElement("u",null,"L"),"ists"),u.createElement("button",{disabled:t,onClick:this.goToday},u.createElement("span",{className:"glyphicon glyphicon-subscript","aria-hidden":"true"})," ",u.createElement("u",null,"T"),"oday"),this.props.previousList&&this.props.previousList.listId&&u.createElement("button",{disabled:t,onClick:this.goPrevious},u.createElement("span",{className:"glyphicon glyphicon-chevron-left","aria-hidden":"true"})," ",this.props.previousList.name))},t}(u.PureComponent),lt=Object(g.a)(Object(m.b)(function(e){return{lists:c.selectListOfLists(e),aList:c.selectAList(e),task:e.app.task,fromList:e.app.fromList,immutables:c.selectImmutableLists(e),exportables:c.selectExportables(e),previousList:o.selectPreviousList(e)}},function(e){return Object(L.b)({reloadAList:s.reloadAList,startupRequest:s.startup,checkAndSave:s.checkAndSaveAction,importList:s.importListAction,exportList:s.exportListAction,addOrOpenAList:s.addOrOpenListByNameAction,moveOutside:s.moveInitiationAction},e)}))(ct),ut=Object(g.a)(Object(g.c)({componentDidMount:function(){this.props.startupRequest()}}))(function(e){var t=e.mode;return t?t===h.MODE_LOADING?u.createElement(b,null):t===h.MODE_LIST_OF_LISTS?u.createElement(rt,null):t===h.MODE_A_LIST?u.createElement(lt,null):t===h.MODE_MOVE?u.createElement(Ce,null):t===h.DATA_CONFLICT?u.createElement(J,{msg:"Data conflict"}):t===h.MODE_ERROR?u.createElement(J,null):u.createElement("div",{className:"error"},"Mode ",t," not impelemented"):u.createElement("div",{className:"error"},"Mode undefined!")}),dt=Object(g.a)(Object(m.b)(function(e){return{mode:e.app.mode}},function(e){return Object(L.b)({startupRequest:s.startup},e)}))(ut),pt=Object(m.b)(function(e){return{message:e.status.message}})(function(e){var t=e.message;return u.createElement("div",null," ",t)}),mt=function(e,t){return("00"+Math.floor(256*e/t).toString(16)).substr(-2,2)},ht=function(e,t,n){return parseInt(e.substring(t,n),10)},ft=function(){return u.createElement("div",null,u.createElement("span",{className:"list-item"},u.createElement("span",{style:{color:(e=f.version.replace(/-/g,""),"#"+mt(ht(e,2,4),31)+mt(ht(e,0,2),12)+mt(ht(e,4,6),24))}}," ",f.version)," ",u.createElement("small",null,u.createElement("b",null,"production"))),u.createElement("span",{className:"glyphicon glyphicon-cog action-button","aria-hidden":"true"}),u.createElement("span",{className:"action-button"},f.user.name),u.createElement("audio",{id:"clickSound",src:f.clickSound}),u.createElement("hr",null));var e},gt=n(113),Lt=n(110),bt=n(241),yt=function(e,t){return function(n,s){return void 0===n&&(n=e),Object.prototype.hasOwnProperty.call(t,s.type)?t[s.type](n,s):n}},Ot=yt({mode:h.MODE_LOADING,lists:[],aList:{id:"",userId:0,name:"",tasks:"",done:"",immutable:!1,lastAction:""},task:"",fromList:{listId:"",name:""}},((Ye={})[s.moveInitiationAction.type]=function(e,t){return je.__assign({},e,{mode:h.MODE_MOVE,fromList:t.payload.fromList,task:t.payload.task})},Ye[s.moveToListAction.type]=function(e,t){return je.__assign({},e,{mode:h.MODE_LOADING})},Ye[s.importListAction.type]=function(e,t){return je.__assign({},e,{mode:h.MODE_LOADING})},Ye[s.exportListAction.type]=function(e,t){return je.__assign({},e,{mode:h.MODE_LOADING})},Ye[s.errorAction.type]=function(e){return je.__assign({},e,{mode:h.MODE_ERROR})},Ye[s.dataConflictAction.type]=function(e,t){return je.__assign({},e,{mode:h.DATA_CONFLICT})},Ye[s.setMode.type]=function(e,t){return je.__assign({},e,{mode:t.payload})},Ye[a.getListOfLists.done.type]=function(e,t){return je.__assign({},e,{lists:Pe(t.payload,"updatedAt",!0)})},Ye[a.getAList.done.type]=function(e,t){return je.__assign({},e,{aList:t.payload})},Ye)),Et=yt({message:"Hello!"},(($e={})[Z.type]=function(e,t){return je.__assign({},e,{message:t.payload})},$e)),At=n(55),vt=yt({listId:null},((Qe={})[ee.type]=function(e,t){return At.set(e,"listId",t.payload)},Qe)),kt=Object(L.c)({app:Ot,status:Et,selected:vt,form:bt.a}),Dt=n(2),Tt=function(e){var t=e.HTTPBase;return{callGetListOfList:function(){return t.get("lists/").then(function(e){return e.data})},callGetAList:function(e){return t.get("list/"+e).then(function(e){return e.data})},callCreateAList:function(e){return t.post("lists/",e).then(function(e){return e.data})},callUpdateAList:function(e){return t.put("list/"+e.id,e).then(function(e){return e.data})},callDeleteAList:function(e){return t.delete("list/"+e).then(function(e){return e.data})}}},_t=n(111),St=n.n(_t),Nt={headers:{"content-type":"application/json"}},It=f.apiHost,Ct=f.user.id,jt=(tt={HTTPBaseURL:""+It+Ct+"/"}.HTTPBaseURL,Ze={baseURL:tt},(et=St.a.create(je.__assign({},Nt,Ze))).interceptors.response.use(function(e){return e},function(e){var t=e.response;return console.error("API ERROR:",t),Promise.reject(t)}),{lists:Tt({HTTPBase:et})}),wt=n(112),Mt=function(e){if(!e)throw new wt.Error("Trying create list without name!");return{userId:f.user.id,lastAction:(new Date).toISOString(),name:e,tasks:"[]",done:"[]",immutable:!1}},xt=function(){return jt.lists.callGetListOfList()},Rt=function(e){return jt.lists.callGetAList(e)},Pt=function(e){return jt.lists.callCreateAList(Mt(e))},Ht=function(e,t){return jt.lists.callUpdateAList(je.__assign({id:e},t))},Bt=function(e){return jt.lists.callDeleteAList(e)};function Kt(e){var t,n,a,i,o,c,l=e.payload;return je.__generator(this,function(e){switch(e.label){case 0:return t=l.listId,n=l.listData,a=l.previousAction,i=l.taskToAdd,[4,Object(Dt.c)(r.setStatusMessage(E.msgChecking))];case 1:return e.sent(),[4,Rt(t)];case 2:return(o=e.sent()).lastAction.slice(0,19)===a.slice(0,19)?[3,8]:i?[4,Object(Dt.c)(r.setStatusMessage(E.msgAdding))]:[3,5];case 3:return e.sent(),c={toListId:t,task:i},[4,Object(Dt.c)(s.copyToListAction(c))];case 4:return e.sent(),[2];case 5:return[4,Object(Dt.c)(r.setStatusMessage(E.msgDataConflict))];case 6:return e.sent(),[4,Object(Dt.c)(s.dataConflictAction(o.lastAction))];case 7:return e.sent(),[2];case 8:return[4,Object(Dt.c)(r.setStatusMessage(E.msgSaved))];case 9:return e.sent(),[4,Ht(t,n)];case 10:return e.sent(),[2]}})}function Ft(e){var t,n=e.payload.listName;return je.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,5,,7]),[4,Object(Dt.c)(s.setMode(h.MODE_LOADING))];case 1:return e.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgLoadingLists))];case 2:return e.sent(),[4,ln(n)];case 3:return t=e.sent(),[4,Object(Dt.c)(s.openAList(t))];case 4:return e.sent(),[3,7];case 5:return[4,sn(e.sent())];case 6:return e.sent(),[3,7];case 7:return[2]}})}function qt(e){var t,n,a,r,i,o=e.payload;return je.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,5,,7]),t=o.fromListId,n=o.toListId,[4,Rt(t)];case 1:return a=e.sent(),[4,Rt(n)];case 2:return r=e.sent(),i={lastAction:(new Date).toISOString(),tasks:Ge(a.tasks,r.tasks)},[4,Ht(n,i)];case 3:return e.sent(),[4,Object(Dt.c)(s.openAList(n))];case 4:return e.sent(),[3,7];case 5:return[4,sn(e.sent())];case 6:return e.sent(),[3,7];case 7:return[2]}})}function Gt(e){var t,n,a,i,o,c=e.payload;return je.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,7,,9]),t=c.fromListId,n=c.toListId,[4,Rt(t)];case 1:return a=e.sent(),[4,Rt(n)];case 2:return i=e.sent(),o={lastAction:(new Date).toISOString(),tasks:Ge(a.tasks,i.tasks)},[4,Ht(n,o)];case 3:return e.sent(),[4,Bt(t)];case 4:return e.sent(),[4,Object(Dt.c)(s.openAList(n))];case 5:return e.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgExported))];case 6:return e.sent(),[3,9];case 7:return[4,sn(e.sent())];case 8:return e.sent(),[3,9];case 9:return[2]}})}function zt(e){return je.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,8]),[4,Object(Dt.c)(s.setMode(h.MODE_LOADING))];case 1:return t.sent(),[4,Vt(e)];case 2:return t.sent(),[4,Ut(e)];case 3:return t.sent(),[4,Object(Dt.c)(s.openAList(e.payload.fromListId))];case 4:return t.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgMoved))];case 5:return t.sent(),[3,8];case 6:return[4,sn(t.sent())];case 7:return t.sent(),[3,8];case 8:return[2]}})}function Jt(e){return je.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,7]),[4,Object(Dt.c)(s.setMode(h.MODE_LOADING))];case 1:return t.sent(),[4,Ut(e)];case 2:return t.sent(),[4,Object(Dt.c)(s.openAList(e.payload.toListId))];case 3:return t.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgCopied))];case 4:return t.sent(),[3,7];case 5:return[4,sn(t.sent())];case 6:return t.sent(),[3,7];case 7:return[2]}})}function Wt(e){var t,n;return je.__generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,9,,11]),[4,Object(Dt.c)(s.setMode(h.MODE_LOADING))];case 1:return a.sent(),[4,ln(e.payload.listName)];case 2:return t=a.sent(),[4,Ut(n=At.set(e,"payload.toListId",t))];case 3:return a.sent(),e.payload.move?[4,Vt(n)]:[3,5];case 4:a.sent(),a.label=5;case 5:return[4,Object(Dt.c)(s.openAList(e.payload.backToOldList?e.payload.fromListId:t))];case 6:return a.sent(),[4,Object(Dt.c)(s.setMode(h.MODE_A_LIST))];case 7:return a.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgMoved))];case 8:return a.sent(),[3,11];case 9:return[4,sn(a.sent())];case 10:return a.sent(),[3,11];case 11:return[2]}})}function Ut(e){var t,n,s,a,r=e.payload;return je.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,5]),t=r.toListId,n=r.task,[4,Rt(t)];case 1:return s=e.sent(),a={lastAction:(new Date).toISOString(),tasks:ze(n,s.tasks)},[4,Ht(t,a)];case 2:return e.sent(),[3,5];case 3:return[4,sn(e.sent())];case 4:return e.sent(),[3,5];case 5:return[2]}})}function Vt(e){var t,n,s,a,r=e.payload;return je.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,5]),t=r.fromListId,n=r.task,[4,Rt(t)];case 1:return s=e.sent(),a={lastAction:(new Date).toISOString(),tasks:Je(n,s.tasks)},[4,Ht(t,a)];case 2:return e.sent(),[3,5];case 3:return[4,sn(e.sent())];case 4:return e.sent(),[3,5];case 5:return[2]}})}function Xt(){return je.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,6,,8]),[4,Object(Dt.c)(s.setMode(h.MODE_LOADING))];case 1:return e.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgLoadingLists))];case 2:return e.sent(),[4,rn()];case 3:return e.sent(),[4,Object(Dt.c)(s.setMode(h.MODE_LIST_OF_LISTS))];case 4:return e.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgListsLoaded))];case 5:return e.sent(),[3,8];case 6:return[4,sn(e.sent())];case 7:return e.sent(),[3,8];case 8:return[2]}})}function Yt(){var e,t;return je.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,8,,10]),[4,Object(Dt.d)(o.selectCurrentMode)];case 1:return e=n.sent(),[4,Object(Dt.d)(l.getCurrentMessage)];case 2:return t=n.sent(),[4,Object(Dt.c)(s.setMode(h.MODE_LOADING))];case 3:return n.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgLoadingLists))];case 4:return n.sent(),[4,rn()];case 5:return n.sent(),[4,Object(Dt.c)(s.setMode(e))];case 6:return n.sent(),[4,Object(Dt.c)(r.setStatusMessage(t))];case 7:return n.sent(),[3,10];case 8:return[4,sn(n.sent())];case 9:return n.sent(),[3,10];case 10:return[2]}})}function $t(){var e,t,n,o,c,l;return je.__generator(this,function(u){switch(u.label){case 0:return u.trys.push([0,18,,20]),[4,Object(Dt.c)(s.setMode(h.MODE_LOADING))];case 1:return u.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgLoadingLists))];case 2:return u.sent(),[4,xt()];case 3:return e=u.sent(),[4,Object(Dt.c)(a.getListOfLists.done(e))];case 4:return u.sent(),t=de(new Date),(n=e.find(function(e){return e.name===t}))?[3,8]:[4,Object(Dt.c)(r.setStatusMessage("statusMessages.msgCreatingAList"+t))];case 5:return u.sent(),[4,Pt(t)];case 6:return n=u.sent(),[4,rn()];case 7:u.sent(),u.label=8;case 8:return c=[],l=n.tasks,Ee().forEach(function(t){(o=e.find(function(e){return e.name===t}))&&(c.push(o.id),l=Ge(l,o.tasks))}),c.length?(n=je.__assign({},n,{lastAction:(new Date).toISOString(),tasks:l}),[4,Ht(n.id,n)]):[3,13];case 9:return u.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgDeletingAList))];case 10:return u.sent(),[4,Object(Dt.a)(c.map(function(e){return Bt(e)}))];case 11:return u.sent(),[4,rn()];case 12:u.sent(),u.label=13;case 13:return[4,Object(Dt.c)(a.getAList.done(n))];case 14:return u.sent(),[4,Object(Dt.c)(i.setSelectedList(n.id))];case 15:return u.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgTodaysLoaded))];case 16:return u.sent(),[4,Object(Dt.c)(s.setMode(h.MODE_A_LIST))];case 17:return u.sent(),[3,20];case 18:return[4,sn(u.sent())];case 19:return u.sent(),[3,20];case 20:return[2]}})}function Qt(e){var t=e.payload;return je.__generator(this,function(e){switch(e.label){case 0:return[4,Object(Dt.c)(s.setMode(h.MODE_LOADING))];case 1:return e.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgDeletingAList))];case 2:return e.sent(),[4,Bt(t)];case 3:return e.sent(),[4,rn()];case 4:return e.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgListDeleted))];case 5:return e.sent(),[4,Object(Dt.c)(s.setMode(h.MODE_LIST_OF_LISTS))];case 6:return e.sent(),[2]}})}var Zt=function(e,t){return t.includes(e)};function en(){var e,t,n,a,i,o;return je.__generator(this,function(c){switch(c.label){case 0:return[4,Object(Dt.c)(r.setStatusMessage(E.msgPlanAWeek))];case 1:return c.sent(),[4,Object(Dt.c)(s.setMode(h.MODE_LOADING))];case 2:c.sent(),c.label=3;case 3:return c.trys.push([3,12,,14]),[4,xt()];case 4:e=c.sent(),t=e.filter(function(e){return e.immutable}),n=new Date,a=new Date,i=function(s){var r,i,o,c,l;return je.__generator(this,function(u){switch(u.label){case 0:return a=new Date(n.getTime()+864e5*s),r=de(a),e.find(function(e){return e.name===r})?[3,3]:[4,Pt(r)];case 1:return i=u.sent(),o=["Auto - "+he(a)+"d.","Auto - "+pe(a),"Auto - "+me(a)+" "+he(a)+"d."],t.filter(function(e){return Zt(e.name,o)}).map(function(e){return e.name}),(c=t.filter(function(e){return Zt(e.name,o)}).flatMap(function(e){return JSON.parse(e.tasks)})).length?(l={lastAction:(new Date).toISOString(),tasks:JSON.stringify(c)},[4,Ht(i.id,l)]):[3,3];case 2:u.sent(),u.label=3;case 3:return[2]}})},o=6,c.label=5;case 5:return o>=0?[5,i(o)]:[3,8];case 6:c.sent(),c.label=7;case 7:return o--,[3,5];case 8:return[4,rn()];case 9:return c.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgWeekPlanned))];case 10:return c.sent(),[4,Object(Dt.c)(s.setMode(h.MODE_LIST_OF_LISTS))];case 11:return c.sent(),[3,14];case 12:return[4,sn(c.sent())];case 13:return c.sent(),[3,14];case 14:return[2]}})}function tn(e){var t,n=e.payload;return je.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,6,,8]),[4,Object(Dt.c)(r.setStatusMessage(E.msgLoadingAList))];case 1:return e.sent(),[4,Object(Dt.c)(s.setMode(h.MODE_LOADING))];case 2:return e.sent(),[4,on(n)];case 3:return t=e.sent(),[4,Object(Dt.c)(s.setMode(h.MODE_A_LIST))];case 4:return e.sent(),[4,Object(Dt.c)(r.setStatusMessage(""+t+E.msgLoaded))];case 5:return e.sent(),[3,8];case 6:return[4,sn(e.sent())];case 7:return e.sent(),[3,8];case 8:return[2]}})}function nn(e){var t,n=e.payload;return je.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,10,,12]),[4,Object(Dt.c)(r.setStatusMessage(E.msgLoadingAList))];case 1:return e.sent(),[4,Object(Dt.c)(s.setMode(h.MODE_LOADING))];case 2:return e.sent(),[4,on(n)];case 3:return(t=e.sent())?[4,Object(Dt.c)(s.setMode(h.MODE_A_LIST))]:[3,6];case 4:return e.sent(),[4,Object(Dt.c)(r.setStatusMessage(""+t+E.msgLoaded))];case 5:return e.sent(),[2];case 6:return[4,rn()];case 7:return e.sent(),[4,Object(Dt.c)(r.setStatusMessage(E.msgListsLoaded))];case 8:return e.sent(),[4,Object(Dt.c)(s.setMode(h.MODE_LIST_OF_LISTS))];case 9:return e.sent(),[3,12];case 10:return[4,sn(e.sent())];case 11:return e.sent(),[3,12];case 12:return[2]}})}function sn(e){return je.__generator(this,function(t){switch(t.label){case 0:return console.error(e),[4,Object(Dt.c)(s.errorAction(e))];case 1:return t.sent(),[2]}})}function an(){return je.__generator(this,function(e){switch(e.label){case 0:return[4,Object(Dt.a)([Object(Dt.e)(s.addOrOpenListByNameAction,Ft),Object(Dt.e)(s.checkAndSaveAction,Kt),Object(Dt.e)(s.moveToListAction,zt),Object(Dt.e)(s.copyToListAction,Jt),Object(Dt.e)(s.moveToListByNameAction,Wt),Object(Dt.e)(s.importListAction,qt),Object(Dt.e)(s.exportListAction,Gt),Object(Dt.e)(s.planWeekAction,en),Object(Dt.e)(s.startup,Xt),Object(Dt.e)(s.openAList,tn),Object(Dt.e)(s.reloadListOfLists,Yt),Object(Dt.e)(s.reloadAList,nn),Object(Dt.e)(s.collectPastDays,$t),Object(Dt.e)(s.deleteAList,Qt)])];case 1:return e.sent(),[2]}})}function rn(){var e;return je.__generator(this,function(t){switch(t.label){case 0:return[4,Object(Dt.b)(jt.lists.callGetListOfList)];case 1:return e=t.sent(),[4,Object(Dt.c)($.done(e))];case 2:return t.sent(),[2]}})}function on(e){var t;return je.__generator(this,function(n){switch(n.label){case 0:return[4,Rt(e)];case 1:return t=n.sent(),[4,Object(Dt.c)(Q.done(t))];case 2:return n.sent(),[2,t?t.name:null]}})}function cn(){return je.__generator(this,function(e){switch(e.label){case 0:return[4,Object(Dt.a)([])];case 1:return e.sent(),[2]}})}function ln(e){var t,n;return je.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,Object(Dt.b)(jt.lists.callGetListOfList)];case 1:return t=s.sent(),(n=t.find(function(t){return t.name===e}))?[2,n.id]:[4,Object(Dt.b)(jt.lists.callCreateAList,Mt(e))];case 2:return[2,s.sent().id];case 3:return[4,sn(s.sent())];case 4:return s.sent(),[3,5];case 5:return[2]}})}function*un(){yield Object(Dt.a)([an(),cn()])}var dn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||L.d;window.onbeforeunload=function(){return"Do you really want to leave ToDo app?"};var pn,mn=((pn=function(e){var t=Object(gt.a)(),n=[t,Lt.a].concat(e);return je.__assign({},Object(L.e)(kt,dn(L.a.apply(void 0,n))),{runSaga:t.run})}([])).runSaga(un),pn);p.render(u.createElement(m.a,{store:mn},u.createElement(dt,null)),f.appNode),p.render(u.createElement(m.a,{store:mn},u.createElement(pt,null)),f.statusNode),p.render(u.createElement(m.a,{store:mn},u.createElement(ft,null)),f.userNode)}},[[114,1,2]]]);
//# sourceMappingURL=main.1f04a6ef.chunk.js.map