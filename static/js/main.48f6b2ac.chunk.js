(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,n){e.exports=n(241)},123:function(e,t,n){},241:function(e,t,n){"use strict";n.r(t);var s={};n.r(s),n.d(s,"addOrOpenListByNameAction",(function(){return G})),n.d(s,"moveInitiationAction",(function(){return z})),n.d(s,"moveToListByNameAction",(function(){return J})),n.d(s,"moveToListAction",(function(){return U})),n.d(s,"copyToListAction",(function(){return V})),n.d(s,"importListAction",(function(){return W})),n.d(s,"exportListAction",(function(){return X})),n.d(s,"checkAndSaveAction",(function(){return Y})),n.d(s,"planWeekAction",(function(){return $})),n.d(s,"dataConflictAction",(function(){return Q})),n.d(s,"errorAction",(function(){return Z})),n.d(s,"setMode",(function(){return ee})),n.d(s,"reloadListOfLists",(function(){return te})),n.d(s,"reloadAList",(function(){return ne})),n.d(s,"openAList",(function(){return se})),n.d(s,"collectPastDays",(function(){return ae})),n.d(s,"startup",(function(){return re})),n.d(s,"deleteAList",(function(){return ie}));var a={};n.r(a),n.d(a,"newListAction",(function(){return ue})),n.d(a,"updateListAction",(function(){return de})),n.d(a,"refreshListAction",(function(){return pe})),n.d(a,"getListOfLists",(function(){return me})),n.d(a,"getAList",(function(){return he}));var r={};n.r(r),n.d(r,"setStatusMessage",(function(){return fe}));var i={};n.r(i),n.d(i,"setSelectedList",(function(){return be}));var o={};n.r(o),n.d(o,"selectSelectedTask",(function(){return Ie})),n.d(o,"selectCurrentMode",(function(){return we})),n.d(o,"selectPreviousList",(function(){return Ce}));var c={};n.r(c),n.d(c,"selectListOfLists",(function(){return Pe})),n.d(c,"selectAListById",(function(){return He})),n.d(c,"selectAList",(function(){return Be})),n.d(c,"selectMutableLists",(function(){return Ke})),n.d(c,"selectImmutableLists",(function(){return Fe})),n.d(c,"selectExportables",(function(){return qe})),n.d(c,"getFilteredListOfLists",(function(){return Ge})),n.d(c,"findLegacyExists",(function(){return ze}));var l={};n.r(l),n.d(l,"getCurrentMessage",(function(){return Je}));var u=n(0),d=n.n(u),p=n(53),m=n(12);var h,f={devHost:"https://akvaratodo-flask-api.herokuapp.com/",apiHost:"https://akvaratodo-flask-api.herokuapp.com/",separatorString:"..................",listsAddon:"lists",settingsAddon:"settings",user:{id:1,name:"akvara",settings:{openListIfExists:"Current",addNewAt:4,displayListLength:15,displayDoneLength:3,displayLast:2}},statusNode:document.getElementById("status"),userNode:document.getElementById("user"),appNode:document.getElementById("app"),footerNode:document.getElementById("footer"),clickSound:"https://www.soundjay.com/buttons/button-20.mp3",version:"0326-18"},b=n(13),g=n(9),L=(n(123),function(){return u.createElement("div",{className:"spinner"},"Loading...")});!function(e){e.MODE_LOADING="LOADING",e.MODE_ERROR="ERROR",e.MODE_LIST_OF_LISTS="LIST_OF_LISTS",e.MODE_A_LIST="A_LIST",e.MODE_MOVE="MOVE",e.DATA_CONFLICT="DATA_CONFLICT"}(h||(h={}));var O,y=180,E=7,v="Planing a week ...",A="Checking ...",k="Adding ...",D="Saved.",_="Item moved.",T="Item copied.",S="List exported.",j="Data conflict.",N="Loading lists ...",I="Loading a list ...",w="Lists loaded.",C="Today's list loaded.",M=" loaded.",x="Deleting a list ...",R="List removed.",P="A week ahead added.",H=function(e){var t=e.msg,n=e.openAListRequest,s=e.aList;return u.createElement("div",null,u.createElement("br",null),t,u.createElement("br",null),"Please ",u.createElement("button",{onClick:function(){return n(s.id)}},"reload"))},B=n(26),K=n.n(B),F={appName:"app"},q=Object(B.actionCreatorFactory)(F.appName+"/app"),G=q("ADD_OR_OPEN_LIST"),z=q("MOVE_INITIATED"),J=q("MOVE_BY_NAME"),U=q("MOVE_TO"),V=q("COPY_TO"),W=q("IMPORT_LIST"),X=q("EXPORT_LIST"),Y=q("CHECK_AND_SAVE"),$=q("PLAN_WEEK"),Q=q("DATA_CONFLICT"),Z=q("ERROR"),ee=q("SET_MODE"),te=q("RELOAD_LISTS"),ne=q("RELOAD_A_LIST"),se=q("OPEN_A_LIST"),ae=q("COLLECT_PAST"),re=q("STARTUP"),ie=q("DELETE_A_LIST"),oe=Object(b.a)(Object(b.b)({msg:"Ooops, something went wrong..."}),Object(m.b)((function(e){return{aList:e.app.aList}}),(function(e){return Object(g.b)({openAListRequest:se},e)})))(H),ce=n(245),le=Object(B.actionCreatorFactory)(F.appName+"/list"),ue=le.async("NEW_LIST"),de=le.async("UPDATE_LIST"),pe=le.async("REFRESH_LIST"),me=le.async("GET_LIST_OF_LISTS"),he=le.async("GET_A_LIST"),fe=Object(B.actionCreatorFactory)(F.appName+"/status")("SET_STATUS_MESSAGE"),be=K()(F.appName+"/selected")("SET_SELECTED_LIST"),ge=n(73),Le=n.n(ge),Oe=function(e){Le()(document).on("keypress",(function(t){return e(t)}))},ye=function(){Le()(document).off("keypress")},Ee=function(){document.getElementById("clickSound").play()},ve=n(243),Ae=n(242);!function(e){e.listsFilter="listsFilter"}(O||(O={}));var ke=Object(b.a)(Object(Ae.a)({form:O.listsFilter,initialValues:{searchInput:""}}))((function(e){var t=e.pageHotKeys;return u.createElement(ve.a,{className:"list-input",name:"searchInput",placeholder:"",component:"input",onFocus:ye.bind(void 0),onBlur:Oe.bind(void 0,t)})}));const De=["Sekmadien\u012f","Pirmadien\u012f","Antradien\u012f","Tre\u010diadien\u012f","Ketvirtadien\u012f","Penktadien\u012f","\u0160e\u0161tadien\u012f"],_e=["sausio","vasario","kovo","baland\u017eio","gegu\u017e\u0117s","bir\u017eelio","liepos","rugpj\u016b\u010dio","rugs\u0117jo","spalio","lapkri\u010dio","gruod\u017eio"];var Te=function(e){return De[e.getDay()]+", "+_e[e.getMonth()]+" "+e.getDate()+" d."},Se=function(e){return _e[e.getMonth()]},je=function(e){return e.getDate()},Ne=Object(b.a)(Object(b.d)({moveHandler:function(e){var t=e.moveToList,n=e.fromList,s=e.task;return function(e){t({fromListId:n.listId,toListId:e,task:s})}},copyHandler:function(e){var t=e.copyToAList,n=e.task;return function(e){t({toListId:e,task:n})}},moveToNewListHandler:function(e){var t=e.moveToListByName,n=e.fromList,s=e.task,a=e.newListName;return function(){t({fromListId:n.listId,task:s,listName:a,move:!0})}},moveToTomorrowHandler:function(e){var t=e.moveToListByName,n=e.fromList,s=e.task;return function(){t({fromListId:n.listId,task:s,listName:Te(new Date((new Date).setDate((new Date).getDate()+1))),move:!0,backToOldList:!0})}},copyToNewListHandler:function(e){var t=e.moveToListByName,n=e.fromList,s=e.task,a=e.newListName;return function(){t({fromListId:n.listId,task:s,listName:a,move:!1})}},backHandler:function(e){var t=e.openAList,n=e.fromList;return function(){t(n.listId)}},reloadHandler:function(e){var t=e.reloadListOfListsPage;return function(){t()}}}),Object(b.e)((function(e){var t=e.reloadHandler,n=e.backHandler;return{pageHotKeys:function(e){var s=String.fromCharCode(e.which);return"r"===s?(e.preventDefault(),Ee(),void t()):"<"===s?(e.preventDefault(),Ee(),void n()):void 0}}})),Object(b.c)({componentDidMount:function(){Oe(this.props.pageHotKeys)},componentWillUnmount:function(){ye()}}))((function(e){var t=e.task,n=e.newListName,s=e.tomorrowListName,a=e.lists,r=e.fromList,i=e.moveToNewListHandler,o=e.moveToTomorrowHandler,c=e.copyToNewListHandler,l=e.moveHandler,d=e.copyHandler,p=e.backHandler,m=e.reloadHandler,h=e.pageHotKeys;return u.createElement(u.Fragment,null,u.createElement("hr",null),u.createElement("h2",null,t.substring(0,y)),u.createElement("hr",null),u.createElement("button",{onClick:p},"<"," Back to ",r.name)," ",u.createElement("button",{onClick:m},u.createElement("span",{className:"glyphicon glyphicon-refresh","aria-hidden":"true"})," ",u.createElement("u",null,"R"),"eload")," ",u.createElement("button",{onClick:o},s),u.createElement("hr",null),u.createElement(ke,{pageHotKeys:h}),u.createElement("button",{disabled:!n,onClick:i},"Move to new list")," ",u.createElement("button",{disabled:!n,onClick:c},"Copy to new list"),u.createElement("hr",null),u.createElement("table",{className:"table table-hover"},u.createElement("tbody",null,a.map((function(e){return e.id===r.listId?null:u.createElement("tr",{key:"tr"+e.id},u.createElement("td",null,"To: ",u.createElement("strong",null,e.name)),u.createElement("td",null,u.createElement("button",{onClick:function(){return l(e.id)}},"Move")," ",u.createElement("button",{onClick:function(){return d(e.id)}},"Copy")))})))))})),Ie=function(e){return e.app.task},we=function(e){return e.app.mode},Ce=function(e){return e.app.fromList&&e.app.aList.id===e.app.fromList.listId?null:e.app.fromList},Me=n(114),xe=function(e,t){if(!t)return e;var n,s,a,r=t.filter((function(t){return t.listName===e}));return r.length?(n=e,s=r[0].key,-1===(a=n.toLowerCase().indexOf(s))?n:d.a.createElement("span",null,n.substring(0,a),d.a.createElement("u",null,n.substring(a,a+1)),n.substring(a+1,n.length))):e},Re=function(){return Array.from({length:E},(function(e,t){return Te(new Date(Date.now()-864e5*(t+1)))}))},Pe=function(e){return e.app.lists},He=function(e){return function(t){return t.app.lists.find((function(t){return t.id===e}))||null}},Be=function(e){return e.app.aList},Ke=function(e){return e.app.lists.filter((function(e){return!e.immutable}))},Fe=function(e){return e.app.lists.filter((function(e){return e.immutable}))},qe=function(e){return e.app.lists.filter((function(t){return t.id!==e.app.aList.id&&!t.immutable})).slice(0,20)},Ge=Object(Me.a)([Ke,Object(ce.a)(O.listsFilter)],(function(e,t){return t?e.filter((function(e){return n=e.name,s=t.searchInput,void 0===n&&(n=""),n.toLocaleLowerCase().indexOf(s.toLocaleLowerCase())>-1;var n,s})):e})),ze=function(e){return e.app.lists.some((function(e){return Re().includes(e.name)}))},Je=function(e){return e.status.message},Ue=Object(g.d)(Object(m.b)((function(e){var t=Object(ce.a)(O.listsFilter)(e);return{lists:c.getFilteredListOfLists(e),task:o.selectSelectedTask(e),fromList:e.app.fromList,newListName:t?t.searchInput:"",tomorrowListName:Te(new Date((new Date).setDate((new Date).getDate()+1)))}}),(function(e){return Object(g.b)({openAList:s.openAList,moveToListByName:s.moveToListByNameAction,moveToList:s.moveToListAction,copyToAList:s.copyToListAction,reloadListOfListsPage:s.reloadListOfLists},e)})))(Ne),Ve=n(4),We=n(5),Xe=n.n(We),Ye=n(30);const $e=(e,t,n,s)=>{let a=e[n];return e.splice(n,1),{A:e,B:t=s?Ye.a.unique([a].concat(t)):Ye.a.unique(t.concat([a]))}},Qe=(e,t)=>JSON.stringify(Ye.a.unique(JSON.parse(e).concat(JSON.parse(t)))),Ze=(e,t)=>t.length>f.user.settings[e],et=e=>nt(e).substr(0,10),tt=e=>nt(e).substr(11,5),nt=e=>new Date(new Date(e).toString().replace(/GMT.*/g,"")+" UTC").toISOString();var st,at,rt,it,ot,ct,lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contractedListItemHeader=function(e,n){var s="glyphicon-minus";return e.isContracted&&(s="glyphicon-plus"),d.a.createElement("tr",{key:"tr"+n},d.a.createElement("td",{colSpan:2,onClick:t.props.toggleContracted.bind(t,e.contractedTitle,!e.isContracted)},d.a.createElement("span",{className:"glyphicon list-item list-item-glyph glyphicon "+s,"aria-hidden":"true"}),e.contractedTitle),d.a.createElement("td",{className:"right-align"},d.a.createElement("strong",null,e.list.length)))},t.contractedListItems=function(e){return e.isContracted?null:e.list.map(t.displayIndentedListRow)},t.contractedList=function(e,n){return[t.contractedListItemHeader(e,n),t.contractedListItems(e,n)]},t.displayIndentedListRow=function(e,n){var s=t.prepareListForDisplaying(e);return s.indent=!0,t.displayListRow(s,n)},t.displayListRow=function(e,n){return d.a.createElement("tr",{key:"tr"+n},d.a.createElement("td",{className:e.itemClass,onClick:e.action},e.indent&&d.a.createElement("span",{className:"glyphicon list-item list-item-glyph","aria-hidden":"true"}," "),d.a.createElement("span",{className:"glyphicon list-item list-item-glyph glyphicon-folder-open","aria-hidden":"true"}),e.name),d.a.createElement("td",{className:"actions"},e.deletable&&d.a.createElement("span",{className:"glyphicon glyphicon-trash action-button","aria-hidden":"true",onClick:t.props.removeList.bind(t,e.id)})),d.a.createElement("td",{className:"right-align"},d.a.createElement("span",null,"(",d.a.createElement("strong",null,e.noOfTasks),")"),d.a.createElement("span",{className:"less-useful"},e.updatedDateOrTime)))},t.prepareListForDisplaying=function(e){var n={id:e.id,tasks:e.tasks,noOfTasks:e.tasks?JSON.parse(e.tasks).length:0,name:xe(e.name,t.props.hotKeys),itemClass:"list-item",action:t.props.openList.bind(t,e.id,e.name),deletable:!e.tasks||"[]"===e.tasks&&!e.immutable,updatedDateOrTime:et((new Date).toISOString())===et(e.updatedAt)?tt(e.updatedAt):et(e.updatedAt)};return e.immutable&&(n.itemClass+=" list-item-immutable"),n},t.displayList=function(e,n){if(e.isList)return t.contractedList(e,n);var s=t.prepareListForDisplaying(e);return t.displayListRow(s,n)},t}return Object(Ve.__extends)(t,e),t.prototype.render=function(){return d.a.createElement("table",{className:"table table-hover"},d.a.createElement("tbody",null,this.props.lists.map(this.displayList)))},t.propTypes={hotKeys:Xe.a.array,lists:Xe.a.array,openList:Xe.a.func.isRequired,removeList:Xe.a.func},t}(u.Component),ut=function(e){var t=[];e.map((function(e){var n=e.name.indexOf(" - ");if(n>-1){var s=e.name.substring(0,n);t[s]||(t[s]={used:!1,list:[]}),t[s].list.push(e)}return null}));var n=[];return e.map((function(e){var s=e.name.indexOf(" - ");if(s>-1){var a=e.name.substring(0,s);t[a].list.length>1?t[a].used||(t[a].used=!0,n.push({isList:!0,isContracted:!0,contractedTitle:a,list:t[a].list})):n.push(e)}else n.push(e);return null})),n},dt=function(e){function t(t){var n=e.call(this,t)||this;return n.checkKeyPressed=function(e){var t=String.fromCharCode(e.which);return"a"===t?(Ee(),e.preventDefault(),void n.listNameInput.focus()):"r"===t||"l"===t?(Ee(),e.preventDefault(),void n.reload()):"t"===t?(Ee(),void n.goToday()):"p"===t?(Ee(),void n.props.planWeek()):">"===t?(Ee(),void n.props.collectPastDaysRequest()):void n.hotKeys.forEach(function(e){e.key===t&&(Ee(),this.openAList(e.listId))}.bind(n))},n.addHotKeys=function(){n.state.lists.forEach((function(e){if(!e.isList){var t=n.findFreeKey(e.name);t&&n.hotKeys.push({key:t,listId:e.id,listName:e.name})}}))},n.keyIsNotOccupied=function(e){return!n.hotKeys.filter((function(t){return t.key===e})).length},n.findFreeKey=function(e){for(var t=0,s=e.length;t<s;t++){var a=e[t].toLowerCase();if(-1!=="abcdefghijklmnopqrstuvwxyz".indexOf(a)&&n.keyIsNotOccupied(a))return a}return null},n.reload=function(){n.props.startupRequest()},n.onNameChange=function(e){n.setState({listName:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),n.props.addOrOpenAList({listName:n.state.listName})},n.openAList=function(e){n.props.getAListRequest(e)},n.toggleContracted=function(e,t){var s=n.state.lists.map((function(n){return n.isList&&n.contractedTitle===e?Object(Ve.__assign)(Object(Ve.__assign)({},n),{isContracted:t}):n}));n.setState({lists:s})},n.removeList=function(e){n.props.removeList(e)},n.handleKeyDownAtListInput=function(e){27===e.keyCode&&(n.listNameInput.blur(),n.setState({listName:""}))},n.goToday=function(){return n.props.addOrOpenAList({listName:Te(new Date)})},n.state={lists:ut(t.lists.filter((function(e){return!e.immutable}))),immutableLists:t.lists.filter((function(e){return e.immutable})),listName:""},n.hotKeys=[{key:"a"},{key:"r"},{key:"l"},{key:"t"},{key:"p"},{key:">"}],n}return Object(Ve.__extends)(t,e),t.prototype.componentWillUnmount=function(){ye()},t.prototype.componentDidMount=function(){document.title="ToDo lists",Oe(this.checkKeyPressed.bind(this))},t.prototype.render=function(){var e=this;return this.addHotKeys(),u.createElement("div",null,u.createElement("table",{width:"100%"},u.createElement("tbody",null,u.createElement("tr",null,u.createElement("td",null,u.createElement("h1",null,"Lists")),u.createElement("td",{className:"right-align"},this.props.legacyExists&&u.createElement("span",null,u.createElement("button",{onClick:this.props.collectPastDaysRequest}," >> T")," "),u.createElement("button",{onClick:this.goToday},u.createElement("u",null,"T"),"oday"))))),u.createElement(lt,{lists:this.state.lists,openList:this.openAList,toggleContracted:this.toggleContracted,removeList:this.removeList,hotKeys:this.hotKeys}),u.createElement("h3",null,"Protected"),u.createElement(lt,{lists:this.state.immutableLists,openList:this.openAList}),u.createElement("form",{onSubmit:this.handleSubmit},u.createElement("input",{className:"list-input",ref:function(t){e.listNameInput=t},value:this.state.listName,onFocus:ye.bind(this),onBlur:Oe.bind(this,this.checkKeyPressed),onKeyDown:this.handleKeyDownAtListInput,onChange:this.onNameChange}),u.createElement("button",{disabled:!this.state.listName.trim()},"Create new list")),u.createElement("hr",null),u.createElement("button",{onClick:this.props.planWeek},u.createElement("u",null,"P"),"lan week"),u.createElement("button",{onClick:this.reload},u.createElement("span",{className:"glyphicon glyphicon-refresh","aria-hidden":"true"})," ",u.createElement("u",null,"R"),"eload"))},t}(u.PureComponent),pt=Object(b.a)(Object(m.b)((function(e){return{lists:c.selectListOfLists(e),legacyExists:c.findLegacyExists(e)}}),(function(e){return Object(g.b)({getAListRequest:s.openAList,startupRequest:s.startup,removeList:s.deleteAList,addOrOpenAList:s.addOrOpenListByNameAction,planWeek:s.planWeekAction,collectPastDaysRequest:s.collectPastDays},e)})))(dt),mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ve.__extends)(t,e),t.prototype.hightlightOnDemand=function(e,t){return this.props.highlightIndex===t?u.createElement("strong",null,e):u.createElement("span",null,e)},t.prototype.processTaskText=function(e){null===e&&(e="null");var t=e.substring(0,y),n=t;return"http"===e.substring(0,4)?("/"===(t=t.substr(t.indexOf("://")+3))[t.length-1]&&(t=t.substr(0,t.length-1)),n=u.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)):("["===e.substring(0,1)&&(n=u.createElement("span",null,u.createElement("span",{className:"glyphicon glyphicon-folder-open list-first-item","aria-hidden":"true",onClick:this.props.openListByName.bind(this,e.substring(1))}),t.substring(1))),n)},t.prototype.displayTask=function(e,t,n){if(e===f.separatorString)return u.createElement("tr",{key:"tr"+t},u.createElement("td",null,u.createElement("div",{className:"task-row separator-row"},u.createElement("div",null,f.separatorString),u.createElement("div",{className:"right-align"},f.separatorString))));var s=t;s>=f.user.settings.displayListLength-f.user.settings.displayLast&&(s=t+n);var a=this.processTaskText(e);return this.props.immutable?u.createElement("tr",{key:"tr"+t},u.createElement("td",null,a)):u.createElement("tr",{key:"tr"+t},u.createElement("td",null,u.createElement("div",{className:"task-row"},u.createElement("span",{className:"glyphicon glyphicon-unchecked check-button","aria-hidden":"true",onClick:this.props.done.bind(this,s)}),u.createElement("div",{className:"task-description"},u.createElement("span",{className:"task"},this.hightlightOnDemand(a,s))),u.createElement("div",null,u.createElement("span",{className:"glyphicon glyphicon-trash delete-button","aria-hidden":"true",onClick:this.props.delete.bind(this,s)}),u.createElement("span",{className:"glyphicon glyphicon-arrow-down action-button","aria-hidden":"true",onClick:this.props.procrastinate.bind(this,s)}),u.createElement("span",{className:"glyphicon glyphicon-arrow-up action-button","aria-hidden":"true",onClick:this.props.toTop.bind(this,s)}),u.createElement("span",{className:"glyphicon glyphicon-random action-button","aria-hidden":"true",onClick:this.props.move.bind(this,e)}),u.createElement("span",{className:"glyphicon glyphicon-thumbs-down action-button","aria-hidden":"true",onClick:this.props.postpone.bind(this,s)})))))},t.prototype.render=function(){var e=this,t=this.props.items,n=0;return!this.props.expand&&Ze("displayListLength",this.props.items)&&(n=this.props.items.length-f.user.settings.displayListLength,t=this.props.items.slice(0,f.user.settings.displayListLength-f.user.settings.displayLast-1).concat([f.separatorString]).concat(this.props.items.slice(-f.user.settings.displayLast))),u.createElement("table",{className:"table table-condensed table-hover"},u.createElement("tbody",null,t.map((function(t,s){return e.displayTask(t,s,n)}))))},t.propTypes={items:Xe.a.array.isRequired,done:Xe.a.func.isRequired,delete:Xe.a.func.isRequired,toTop:Xe.a.func.isRequired,move:Xe.a.func.isRequired,procrastinate:Xe.a.func.isRequired,postpone:Xe.a.func.isRequired,openListByName:Xe.a.func.isRequired,highlightIndex:Xe.a.number},t}(u.Component),ht=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayTask=function(e,n){return!t.props.expand&&n<t.props.items.length-f.user.settings.displayDoneLength?null:u.createElement("tr",{key:"tr"+n},u.createElement("td",null,u.createElement("span",{className:"glyphicon glyphicon-ok action-button","aria-hidden":"true",onClick:t.props.undone.bind(t,n)}),u.createElement("span",{className:"list-item task done"},e.substring(0,y))))},t}return Object(Ve.__extends)(t,e),t.prototype.render=function(){return u.createElement("div",null,!this.props.expand&&Ze("displayDoneLength",this.props.items)&&f.separatorString,u.createElement("table",{className:"table table-sm table-condensed table-hover"},u.createElement("tbody",null,this.props.items.map(this.displayTask))))},t.propTypes={items:Xe.a.array.isRequired,expand:Xe.a.bool},t}(u.Component),ft=function(e){function t(t){var n=e.call(this,t)||this;return n.calculatePostponePosition=function(e){return Math.floor(e/2)},n.expand=function(e){var t;n.setState(((t={})[e]=!n.state[e],t))},n.doneTask=function(e){var t=$e(n.state.itemsToDo,n.state.itemsDone,e,!1),s=t.A,a=t.B,r=n.prepareClone({itemsToDo:s,itemsDone:a});n.setState({lastAction:r.lastAction,itemsToDo:r.itemsToDo,itemsDone:r.itemsDone,highlightIndex:null}),n.props.checkAndSave(n.serialize(r))},n.unDoneTask=function(e){var t=$e(n.state.itemsDone,n.state.itemsToDo,e,!0),s=n.prepareClone({itemsToDo:t.B,itemsDone:t.A});n.setState({lastAction:s.lastAction,itemsToDo:s.itemsToDo,itemsDone:s.itemsDone,highlightIndex:0}),n.props.checkAndSave(n.serialize(s))},n.clearDone=function(){var e=n.prepareClone({itemsDone:[]});n.setState({lastAction:e.lastAction,itemsDone:e.itemsDone,highlightIndex:null}),n.props.checkAndSave(n.serialize(e))},n.removeTask=function(e){var t,s,a=(t=n.state.itemsToDo,s=e,t.splice(s,1),t),r=n.prepareClone({itemsToDo:a});n.setState({lastAction:r.lastAction,itemsToDo:r.itemsToDo,highlightIndex:null}),n.props.checkAndSave(n.serialize(r))},n.toTop=function(e){var t=((e,t)=>{let n=e[t];return e.splice(t,1),[n].concat(e)})(n.state.itemsToDo,e),s=n.prepareClone({itemsToDo:t});n.setState({lastAction:s.lastAction,itemsToDo:s.itemsToDo,highlightIndex:0}),n.props.checkAndSave(n.serialize(s))},n.mark=function(){var e=n.prepareClone({immutable:!n.state.immutable});n.setState({lastAction:e.lastAction,immutable:e.immutable,highlightIndex:null}),n.props.checkAndSave(n.serialize(e))},n.moveOutside=function(e){var t={fromList:{listId:n.props.aList.id,name:n.state.listName},task:e};n.props.moveOutside(t)},n.procrastinateTask=function(e){var t=((e,t)=>{let n=e[t];return e.splice(t,1),e.concat([n])})(n.state.itemsToDo,e),s=n.prepareClone({itemsToDo:t});n.setState({lastAction:s.lastAction,itemsToDo:s.itemsToDo,highlightIndex:n.state.itemsToDo.length}),n.props.checkAndSave(n.serialize(s))},n.postponeTask=function(e){var t=((e,t,n)=>{let s=e[t];return e.splice(t,1),e.splice(n,0,s),e})(n.state.itemsToDo,e,e+n.calculatePostponePosition(n.state.itemsToDo.length)),s=n.prepareClone({itemsToDo:t}),a=Math.min(n.state.itemsToDo.length-1,e+n.calculatePostponePosition(n.state.itemsToDo.length));n.setState({lastAction:s.lastAction,itemsToDo:s.itemsToDo,highlightIndex:a}),n.props.checkAndSave(n.serialize(s))},n.changeListName=function(e){var t=n.prepareClone({name:e.target.value.trim()});n.setState({lastAction:t.lastAction,listName:t.name,listNameOnEdit:!1,highlightIndex:null}),n.props.checkAndSave(n.serialize(t)),Oe(n.checkKeyPressed.bind(n))},n.listChanger=function(e){n.props.addOrOpenAList({listName:e})},n.reload=function(){n.props.reloadAList(n.props.aList.id)},n.goToday=function(){n.props.addOrOpenAList({listName:Te(new Date)})},n.goLists=function(){n.props.startupRequest()},n.goPrevious=function(){n.listChanger(n.props.previousList.name)},n.editListName=function(){n.setState({listNameOnEdit:!0})},n.checkKeyPressed=function(e){switch(String.fromCharCode(e.which)){case"a":Ee(),e.preventDefault(),n.taskInput.focus();break;case"l":Ee(),n.goLists();break;case"r":Ee(),n.reload();break;case"p":Ee(),n.mark();break;case"t":Ee(),n.goToday();break;case"<":n.props.previousList.listId&&(Ee(),n.goPrevious())}},n.handleHeaderSubmit=function(e){e.preventDefault()},n.handleKeyDownAtTask=function(e){27===e.keyCode&&(n.taskInput.blur(),n.setState({task:""}))},n.handleKeyDownAtHeader=function(e){switch(e.key){case"Enter":case"Tab":n.changeListName(e);break;case"Escape":n.setState({listNameOnEdit:!1})}},n.handleSubmit=function(e){e.preventDefault(),n.taskInput.blur();var t=Math.min(n.state.itemsToDo.length,f.user.settings.addNewAt-1),s=n.state.task.replace(/(^\s+|\s+$)/g,""),a=n.state.itemsToDo;a.splice(f.user.settings.addNewAt-1,0,s),a=Ye.a.unique(a);var r=n.prepareClone({itemsToDo:a,taskToAdd:s});n.setState({lastAction:r.lastAction,itemsToDo:r.itemsToDo,highlightIndex:t,task:""}),n.props.checkAndSave(n.serialize(r))},n.onChange=function(e){n.setState({task:e.target.value})},n.importList=function(e){n.props.importList({fromListId:e,toListId:n.props.aList.id})},n.exportList=function(e){n.props.exportList({fromListId:n.props.aList.id,toListId:e})},n.makeListOption=function(e){return u.createElement("option",{key:"o-"+e.id,value:e.id},e.name)},n.displayImportBlock=function(){return n.state.immutable?null:u.createElement("select",{className:"import-select",onChange:function(e){e.target.value&&n.importList(e.target.value)}},u.createElement("option",{value:""},"Import list"),n.props.immutables.map((function(e){return n.makeListOption(e)})))},n.displayExportBlock=function(){return n.state.immutable?null:u.createElement("select",{className:"import-select",onChange:function(e){e.target.value&&n.exportList(e.target.value)}},u.createElement("option",{value:""},"Export to"),n.props.exportables.map((function(e){return n.makeListOption(e)})))},n.manageHeader=function(){return n.state.listNameOnEdit?u.createElement("h1",null,u.createElement("form",{onSubmit:n.handleHeaderSubmit},u.createElement("input",{ref:function(e){n.headerInput=e},className:"task-input",defaultValue:n.state.listName,onFocus:ye,onKeyDown:n.handleKeyDownAtHeader,onBlur:n.changeListName}))):u.createElement("div",null,u.createElement("h1",null,n.state.listName)," ",u.createElement("span",{className:"small action-button glyphicon glyphicon glyphicon-pencil","aria-hidden":"true",onClick:n.editListName}))},n.state={listName:t.aList.name,itemsToDo:JSON.parse(t.aList.tasks),itemsDone:t.aList.done?JSON.parse(t.aList.done):[],prepend:t.prepend,highlightIndex:t.prepend?0:null,lastAction:t.aList.lastAction,immutable:t.aList.immutable,task:"",reloadNeeded:!1,listNameOnEdit:!1,expandToDo:!1,expandDone:!1},n}return Object(Ve.__extends)(t,e),t.prototype.componentWillUnmount=function(){ye()},t.prototype.componentDidMount=function(){document.title="ToDo lists",Oe(this.checkKeyPressed.bind(this))},t.prototype.prepareClone=function(e){return Object(Ve.__assign)({lastAction:(new Date).toISOString(),listId:this.props.aList.id,previousAction:this.state.lastAction},e)},t.prototype.serialize=function(e){var t={listId:e.listId,previousAction:e.previousAction,listData:{lastAction:e.lastAction,immutable:!!e.immutable}};return e.name&&(t.listData.name=e.name),e.itemsToDo&&(t.listData.tasks=JSON.stringify(e.itemsToDo)),e.itemsDone&&(t.listData.done=JSON.stringify(e.itemsDone)),e.taskToAdd&&(t.taskToAdd=e.taskToAdd),t},t.prototype.render=function(){var e=this,t=!!this.state.task.trim(),n=this.state.immutable?u.createElement("span",null,"Un",u.createElement("u",null,"p"),"rotect"):u.createElement("span",null,u.createElement("u",null,"P"),"rotect"),s=this.state.immutable?"screen-shot":"exclamation-sign",a=this.state.expandToDo?"glyphicon-resize-small":"glyphicon-resize-full",r=this.state.expandDone?"glyphicon-resize-small":"glyphicon-resize-full";return u.createElement("div",null,this.manageHeader(),u.createElement("h3",null,"Finished (",this.state.itemsDone.length,")",Ze("displayDoneLength",this.state.itemsDone)&&u.createElement("span",{className:"small action-button glyphicon "+r,"aria-hidden":"true",onClick:this.expand.bind(this,"expandDone")}),"  ",this.state.itemsDone.length>0&&u.createElement("span",{className:"small action-button glyphicon glyphicon-trash","aria-hidden":"true",onClick:this.clearDone})),u.createElement(ht,{items:this.state.itemsDone,undone:this.unDoneTask,expand:this.state.expandDone}),u.createElement("hr",null),u.createElement("h3",null,"Remaining (",this.state.itemsToDo.length,")",Ze("displayListLength",this.state.itemsToDo)&&u.createElement("span",{className:"small list-item action-button glyphicon "+a,"aria-hidden":"true",onClick:this.expand.bind(this,"expandToDo")})),u.createElement(mt,{items:this.state.itemsToDo,highlightIndex:this.state.highlightIndex,immutable:this.state.immutable,delete:this.removeTask,move:this.moveOutside,toTop:this.toTop,postpone:this.postponeTask,procrastinate:this.procrastinateTask,openListByName:this.listChanger,reloadNeeded:this.state.reloadNeeded,done:this.doneTask,expand:this.state.expandToDo}),!this.state.immutable&&u.createElement("div",null,u.createElement("hr",null),u.createElement("h3",null,"Add new:"),u.createElement("form",{onSubmit:this.handleSubmit},u.createElement("input",{className:"task-input",ref:function(t){e.taskInput=t},value:this.state.task,onFocus:ye,onBlur:function(){return Oe(e.checkKeyPressed)},onKeyDown:this.handleKeyDownAtTask,onChange:this.onChange}),u.createElement("button",{disabled:!this.state.task.trim()},"Add task"))),u.createElement("hr",null),this.displayImportBlock(),this.displayExportBlock(),u.createElement("br",null),u.createElement("button",{disabled:t,onClick:this.reload},u.createElement("span",{className:"glyphicon glyphicon-refresh","aria-hidden":"true"})," ",u.createElement("u",null,"R"),"eload"),u.createElement("button",{disabled:t,onClick:this.mark},u.createElement("span",{className:"glyphicon glyphicon-"+s,"aria-hidden":"true"})," ",n),u.createElement("button",{disabled:t,onClick:this.goLists},u.createElement("span",{className:"glyphicon glyphicon-tasks","aria-hidden":"true"})," ",u.createElement("u",null,"L"),"ists"),u.createElement("button",{disabled:t,onClick:this.goToday},u.createElement("span",{className:"glyphicon glyphicon-subscript","aria-hidden":"true"})," ",u.createElement("u",null,"T"),"oday"),this.props.previousList&&this.props.previousList.listId&&u.createElement("button",{disabled:t,onClick:this.goPrevious},u.createElement("span",{className:"glyphicon glyphicon-chevron-left","aria-hidden":"true"})," ",this.props.previousList.name))},t}(u.PureComponent),bt=Object(b.a)(Object(m.b)((function(e){return{lists:c.selectListOfLists(e),aList:c.selectAList(e),task:e.app.task,fromList:e.app.fromList,immutables:c.selectImmutableLists(e),exportables:c.selectExportables(e),previousList:o.selectPreviousList(e)}}),(function(e){return Object(g.b)({reloadAList:s.reloadAList,startupRequest:s.startup,checkAndSave:s.checkAndSaveAction,importList:s.importListAction,exportList:s.exportListAction,addOrOpenAList:s.addOrOpenListByNameAction,moveOutside:s.moveInitiationAction},e)})))(ft),gt=Object(b.a)(Object(b.c)({componentDidMount:function(){this.props.startupRequest()}}))((function(e){var t=e.mode;return t?t===h.MODE_LOADING?u.createElement(L,null):t===h.MODE_LIST_OF_LISTS?u.createElement(pt,null):t===h.MODE_A_LIST?u.createElement(bt,null):t===h.MODE_MOVE?u.createElement(Ue,null):t===h.DATA_CONFLICT?u.createElement(oe,{msg:"Data conflict"}):t===h.MODE_ERROR?u.createElement(oe,null):u.createElement("div",{className:"error"},"Mode ",t," not impelemented"):u.createElement("div",{className:"error"},"Mode undefined!")})),Lt=Object(b.a)(Object(m.b)((function(e){return{mode:e.app.mode}}),(function(e){return Object(g.b)({startupRequest:s.startup},e)})))(gt),Ot=Object(m.b)((function(e){return{message:e.status.message}}))((function(e){var t=e.message;return u.createElement("div",null," ",t)})),yt=function(e,t){return("00"+Math.floor(256*e/t).toString(16)).substr(-2,2)},Et=function(e,t,n){return parseInt(e.substring(t,n),10)},vt=function(){return u.createElement("div",null,u.createElement("span",{className:"list-item"},u.createElement("span",{style:{color:(e=f.version.replace(/-/g,""),"#"+yt(Et(e,2,4),31)+yt(Et(e,0,2),12)+yt(Et(e,4,6),24))}}," ",f.version)," ",u.createElement("small",null,u.createElement("b",null,"production"))),u.createElement("span",{className:"glyphicon glyphicon-cog action-button","aria-hidden":"true"}),u.createElement("span",{className:"action-button"},f.user.name),u.createElement("audio",{id:"clickSound",src:f.clickSound}),u.createElement("hr",null));var e},At=n(113),kt=n(112),Dt=n(244),_t=function(e,t){return function(n,s){return void 0===n&&(n=e),Object.prototype.hasOwnProperty.call(t,s.type)?t[s.type](n,s):n}},Tt=_t({mode:h.MODE_LOADING,lists:[],aList:{id:"",userId:0,name:"",tasks:"",done:"",immutable:!1,lastAction:""},task:"",fromList:{listId:"",name:""}},((st={})[s.moveInitiationAction.type]=function(e,t){return Object(Ve.__assign)(Object(Ve.__assign)({},e),{mode:h.MODE_MOVE,fromList:t.payload.fromList,task:t.payload.task})},st[s.moveToListAction.type]=function(e,t){return Object(Ve.__assign)(Object(Ve.__assign)({},e),{mode:h.MODE_LOADING})},st[s.importListAction.type]=function(e,t){return Object(Ve.__assign)(Object(Ve.__assign)({},e),{mode:h.MODE_LOADING})},st[s.exportListAction.type]=function(e,t){return Object(Ve.__assign)(Object(Ve.__assign)({},e),{mode:h.MODE_LOADING})},st[s.errorAction.type]=function(e){return Object(Ve.__assign)(Object(Ve.__assign)({},e),{mode:h.MODE_ERROR})},st[s.dataConflictAction.type]=function(e,t){return Object(Ve.__assign)(Object(Ve.__assign)({},e),{mode:h.DATA_CONFLICT})},st[s.setMode.type]=function(e,t){return Object(Ve.__assign)(Object(Ve.__assign)({},e),{mode:t.payload})},st[a.getListOfLists.done.type]=function(e,t){return Object(Ve.__assign)(Object(Ve.__assign)({},e),{lists:(n=t.payload,s="updatedAt",a=!0,a?n.sort((function(e,t){return e[s]>t[s]?-1:1})):n.sort((function(e,t){return e[s]<t[s]?-1:1})))});var n,s,a},st[a.getAList.done.type]=function(e,t){return Object(Ve.__assign)(Object(Ve.__assign)({},e),{aList:t.payload})},st)),St=_t({message:"Hello!"},((at={})[fe.type]=function(e,t){return Object(Ve.__assign)(Object(Ve.__assign)({},e),{message:t.payload})},at)),jt=n(52),Nt=_t({listId:null},((rt={})[be.type]=function(e,t){return jt.set(e,"listId",t.payload)},rt)),It=Object(g.c)({app:Tt,status:St,selected:Nt,form:Dt.a}),wt=n(2),Ct=function(e){var t=e.HTTPBase;return{callGetListOfList:function(){return t.get("lists/").then((function(e){return e.data}))},callGetAList:function(e){return t.get("list/"+e).then((function(e){return e.data}))},callCreateAList:function(e){return t.post("lists/",e).then((function(e){return e.data}))},callUpdateAList:function(e){return t.put("list/"+e.id,e).then((function(e){return e.data}))},callDeleteAList:function(e){return t.delete("list/"+e).then((function(e){return e.data}))}}},Mt=n(110),xt=n.n(Mt),Rt={headers:{"content-type":"application/json"}},Pt=f.apiHost,Ht=f.user.id,Bt=(ct={HTTPBaseURL:""+Pt+Ht+"/"}.HTTPBaseURL,it={baseURL:ct},(ot=xt.a.create(Object(Ve.__assign)(Object(Ve.__assign)({},Rt),it))).interceptors.response.use((function(e){return e}),(function(e){var t=e.response;return console.error("API ERROR:",t),Promise.reject(t)})),{lists:Ct({HTTPBase:ot})}),Kt=n(111),Ft=function(e){if(!e)throw new Kt.Error("Trying create list without name!");return{userId:f.user.id,lastAction:(new Date).toISOString(),name:e,tasks:"[]",done:"[]",immutable:!1}},qt=function(){return Bt.lists.callGetListOfList()},Gt=function(e){return Bt.lists.callGetAList(e)},zt=function(e){return Bt.lists.callCreateAList(Ft(e))},Jt=function(e,t){return Bt.lists.callUpdateAList(Object(Ve.__assign)({id:e},t))},Ut=function(e){return Bt.lists.callDeleteAList(e)};function Vt(e){var t,n,a,i,o,c,l=e.payload;return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return t=l.listId,n=l.listData,a=l.previousAction,i=l.taskToAdd,[4,Object(wt.c)(r.setStatusMessage(A))];case 1:return e.sent(),[4,Gt(t)];case 2:return(o=e.sent()).lastAction.slice(0,19)===a.slice(0,19)?[3,8]:i?[4,Object(wt.c)(r.setStatusMessage(k))]:[3,5];case 3:return e.sent(),c={toListId:t,task:i},[4,Object(wt.c)(s.copyToListAction(c))];case 4:return e.sent(),[2];case 5:return[4,Object(wt.c)(r.setStatusMessage(j))];case 6:return e.sent(),[4,Object(wt.c)(s.dataConflictAction(o.lastAction))];case 7:return e.sent(),[2];case 8:return[4,Object(wt.c)(r.setStatusMessage(D))];case 9:return e.sent(),[4,Jt(t,n)];case 10:return e.sent(),[2]}}))}function Wt(e){var t,n=e.payload.listName;return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,5,,7]),[4,Object(wt.c)(s.setMode(h.MODE_LOADING))];case 1:return e.sent(),[4,Object(wt.c)(r.setStatusMessage(N))];case 2:return e.sent(),[4,bn(n)];case 3:return t=e.sent(),[4,Object(wt.c)(s.openAList(t))];case 4:return e.sent(),[3,7];case 5:return[4,dn(e.sent())];case 6:return e.sent(),[3,7];case 7:return[2]}}))}function Xt(e){var t,n,a,r,i,o=e.payload;return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,5,,7]),t=o.fromListId,n=o.toListId,[4,Gt(t)];case 1:return a=e.sent(),[4,Gt(n)];case 2:return r=e.sent(),i={lastAction:(new Date).toISOString(),tasks:Qe(a.tasks,r.tasks)},[4,Jt(n,i)];case 3:return e.sent(),[4,Object(wt.c)(s.openAList(n))];case 4:return e.sent(),[3,7];case 5:return[4,dn(e.sent())];case 6:return e.sent(),[3,7];case 7:return[2]}}))}function Yt(e){var t,n,a,i,o,c=e.payload;return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,7,,9]),t=c.fromListId,n=c.toListId,[4,Gt(t)];case 1:return a=e.sent(),[4,Gt(n)];case 2:return i=e.sent(),o={lastAction:(new Date).toISOString(),tasks:Qe(a.tasks,i.tasks)},[4,Jt(n,o)];case 3:return e.sent(),[4,Ut(t)];case 4:return e.sent(),[4,Object(wt.c)(s.openAList(n))];case 5:return e.sent(),[4,Object(wt.c)(r.setStatusMessage(S))];case 6:return e.sent(),[3,9];case 7:return[4,dn(e.sent())];case 8:return e.sent(),[3,9];case 9:return[2]}}))}function $t(e){return Object(Ve.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,6,,8]),[4,Object(wt.c)(s.setMode(h.MODE_LOADING))];case 1:return t.sent(),[4,tn(e)];case 2:return t.sent(),[4,en(e)];case 3:return t.sent(),[4,Object(wt.c)(s.openAList(e.payload.fromListId))];case 4:return t.sent(),[4,Object(wt.c)(r.setStatusMessage(_))];case 5:return t.sent(),[3,8];case 6:return[4,dn(t.sent())];case 7:return t.sent(),[3,8];case 8:return[2]}}))}function Qt(e){return Object(Ve.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,5,,7]),[4,Object(wt.c)(s.setMode(h.MODE_LOADING))];case 1:return t.sent(),[4,en(e)];case 2:return t.sent(),[4,Object(wt.c)(s.openAList(e.payload.toListId))];case 3:return t.sent(),[4,Object(wt.c)(r.setStatusMessage(T))];case 4:return t.sent(),[3,7];case 5:return[4,dn(t.sent())];case 6:return t.sent(),[3,7];case 7:return[2]}}))}function Zt(e){var t,n;return Object(Ve.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,9,,11]),[4,Object(wt.c)(s.setMode(h.MODE_LOADING))];case 1:return a.sent(),[4,bn(e.payload.listName)];case 2:return t=a.sent(),[4,en(n=jt.set(e,"payload.toListId",t))];case 3:return a.sent(),e.payload.move?[4,tn(n)]:[3,5];case 4:a.sent(),a.label=5;case 5:return[4,Object(wt.c)(s.openAList(e.payload.backToOldList?e.payload.fromListId:t))];case 6:return a.sent(),[4,Object(wt.c)(s.setMode(h.MODE_A_LIST))];case 7:return a.sent(),[4,Object(wt.c)(r.setStatusMessage(_))];case 8:return a.sent(),[3,11];case 9:return[4,dn(a.sent())];case 10:return a.sent(),[3,11];case 11:return[2]}}))}function en(e){var t,n,s,a,r=e.payload;return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,5]),t=r.toListId,n=r.task,[4,Gt(t)];case 1:return s=e.sent(),a={lastAction:(new Date).toISOString(),tasks:(i=n,o=s.tasks,JSON.stringify(Ye.a.unique([i].concat(JSON.parse(o)))))},[4,Jt(t,a)];case 2:return e.sent(),[3,5];case 3:return[4,dn(e.sent())];case 4:return e.sent(),[3,5];case 5:return[2]}var i,o}))}function tn(e){var t,n,s,a,r=e.payload;return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,5]),t=r.fromListId,n=r.task,[4,Gt(t)];case 1:return s=e.sent(),a={lastAction:(new Date).toISOString(),tasks:(i=n,o=s.tasks,JSON.stringify(JSON.parse(o).filter(e=>e!==i)))},[4,Jt(t,a)];case 2:return e.sent(),[3,5];case 3:return[4,dn(e.sent())];case 4:return e.sent(),[3,5];case 5:return[2]}var i,o}))}function nn(){return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,6,,8]),[4,Object(wt.c)(s.setMode(h.MODE_LOADING))];case 1:return e.sent(),[4,Object(wt.c)(r.setStatusMessage(N))];case 2:return e.sent(),[4,mn()];case 3:return e.sent(),[4,Object(wt.c)(s.setMode(h.MODE_LIST_OF_LISTS))];case 4:return e.sent(),[4,Object(wt.c)(r.setStatusMessage(w))];case 5:return e.sent(),[3,8];case 6:return[4,dn(e.sent())];case 7:return e.sent(),[3,8];case 8:return[2]}}))}function sn(){var e,t;return Object(Ve.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,8,,10]),[4,Object(wt.d)(o.selectCurrentMode)];case 1:return e=n.sent(),[4,Object(wt.d)(l.getCurrentMessage)];case 2:return t=n.sent(),[4,Object(wt.c)(s.setMode(h.MODE_LOADING))];case 3:return n.sent(),[4,Object(wt.c)(r.setStatusMessage(N))];case 4:return n.sent(),[4,mn()];case 5:return n.sent(),[4,Object(wt.c)(s.setMode(e))];case 6:return n.sent(),[4,Object(wt.c)(r.setStatusMessage(t))];case 7:return n.sent(),[3,10];case 8:return[4,dn(n.sent())];case 9:return n.sent(),[3,10];case 10:return[2]}}))}function an(){var e,t,n,o,c,l;return Object(Ve.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,18,,20]),[4,Object(wt.c)(s.setMode(h.MODE_LOADING))];case 1:return u.sent(),[4,Object(wt.c)(r.setStatusMessage(N))];case 2:return u.sent(),[4,qt()];case 3:return e=u.sent(),[4,Object(wt.c)(a.getListOfLists.done(e))];case 4:return u.sent(),t=Te(new Date),(n=e.find((function(e){return e.name===t})))?[3,8]:[4,Object(wt.c)(r.setStatusMessage("statusMessages.msgCreatingAList"+t))];case 5:return u.sent(),[4,zt(t)];case 6:return n=u.sent(),[4,mn()];case 7:u.sent(),u.label=8;case 8:return c=[],l=n.tasks,Re().forEach((function(t){(o=e.find((function(e){return e.name===t})))&&(c.push(o.id),l=Qe(l,o.tasks))})),c.length?(n=Object(Ve.__assign)(Object(Ve.__assign)({},n),{lastAction:(new Date).toISOString(),tasks:l}),[4,Jt(n.id,n)]):[3,13];case 9:return u.sent(),[4,Object(wt.c)(r.setStatusMessage(x))];case 10:return u.sent(),[4,Object(wt.a)(c.map((function(e){return Ut(e)})))];case 11:return u.sent(),[4,mn()];case 12:u.sent(),u.label=13;case 13:return[4,Object(wt.c)(a.getAList.done(n))];case 14:return u.sent(),[4,Object(wt.c)(i.setSelectedList(n.id))];case 15:return u.sent(),[4,Object(wt.c)(r.setStatusMessage(C))];case 16:return u.sent(),[4,Object(wt.c)(s.setMode(h.MODE_A_LIST))];case 17:return u.sent(),[3,20];case 18:return[4,dn(u.sent())];case 19:return u.sent(),[3,20];case 20:return[2]}}))}function rn(e){var t=e.payload;return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return[4,Object(wt.c)(s.setMode(h.MODE_LOADING))];case 1:return e.sent(),[4,Object(wt.c)(r.setStatusMessage(x))];case 2:return e.sent(),[4,Ut(t)];case 3:return e.sent(),[4,mn()];case 4:return e.sent(),[4,Object(wt.c)(r.setStatusMessage(R))];case 5:return e.sent(),[4,Object(wt.c)(s.setMode(h.MODE_LIST_OF_LISTS))];case 6:return e.sent(),[2]}}))}var on=function(e,t){return t.includes(e)};function cn(){var e,t,n,a,i,o;return Object(Ve.__generator)(this,(function(c){switch(c.label){case 0:return[4,Object(wt.c)(r.setStatusMessage(v))];case 1:return c.sent(),[4,Object(wt.c)(s.setMode(h.MODE_LOADING))];case 2:c.sent(),c.label=3;case 3:return c.trys.push([3,12,,14]),[4,qt()];case 4:e=c.sent(),t=e.filter((function(e){return e.immutable})),n=new Date,a=new Date,i=function(s){var r,i,o,c,l;return Object(Ve.__generator)(this,(function(u){switch(u.label){case 0:return a=new Date(n.getTime()+864e5*s),r=Te(a),e.find((function(e){return e.name===r}))?[3,3]:[4,zt(r)];case 1:return i=u.sent(),o=["Auto - "+je(a)+"d.","Auto - "+(d=a,De[d.getDay()].toLowerCase()),"Auto - "+Se(a)+" "+je(a)+"d."],t.filter((function(e){return on(e.name,o)})).map((function(e){return e.name})),(c=t.filter((function(e){return on(e.name,o)})).flatMap((function(e){return JSON.parse(e.tasks)}))).length?(l={lastAction:(new Date).toISOString(),tasks:JSON.stringify(c)},[4,Jt(i.id,l)]):[3,3];case 2:u.sent(),u.label=3;case 3:return[2]}var d}))},o=6,c.label=5;case 5:return o>=0?[5,i(o)]:[3,8];case 6:c.sent(),c.label=7;case 7:return o--,[3,5];case 8:return[4,mn()];case 9:return c.sent(),[4,Object(wt.c)(r.setStatusMessage(P))];case 10:return c.sent(),[4,Object(wt.c)(s.setMode(h.MODE_LIST_OF_LISTS))];case 11:return c.sent(),[3,14];case 12:return[4,dn(c.sent())];case 13:return c.sent(),[3,14];case 14:return[2]}}))}function ln(e){var t,n=e.payload;return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,6,,8]),[4,Object(wt.c)(r.setStatusMessage(I))];case 1:return e.sent(),[4,Object(wt.c)(s.setMode(h.MODE_LOADING))];case 2:return e.sent(),[4,hn(n)];case 3:return t=e.sent(),[4,Object(wt.c)(s.setMode(h.MODE_A_LIST))];case 4:return e.sent(),[4,Object(wt.c)(r.setStatusMessage(""+t+M))];case 5:return e.sent(),[3,8];case 6:return[4,dn(e.sent())];case 7:return e.sent(),[3,8];case 8:return[2]}}))}function un(e){var t,n=e.payload;return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,10,,12]),[4,Object(wt.c)(r.setStatusMessage(I))];case 1:return e.sent(),[4,Object(wt.c)(s.setMode(h.MODE_LOADING))];case 2:return e.sent(),[4,hn(n)];case 3:return(t=e.sent())?[4,Object(wt.c)(s.setMode(h.MODE_A_LIST))]:[3,6];case 4:return e.sent(),[4,Object(wt.c)(r.setStatusMessage(""+t+M))];case 5:return e.sent(),[2];case 6:return[4,mn()];case 7:return e.sent(),[4,Object(wt.c)(r.setStatusMessage(w))];case 8:return e.sent(),[4,Object(wt.c)(s.setMode(h.MODE_LIST_OF_LISTS))];case 9:return e.sent(),[3,12];case 10:return[4,dn(e.sent())];case 11:return e.sent(),[3,12];case 12:return[2]}}))}function dn(e){return Object(Ve.__generator)(this,(function(t){switch(t.label){case 0:return console.error(e),[4,Object(wt.c)(s.errorAction(e))];case 1:return t.sent(),[2]}}))}function pn(){return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return[4,Object(wt.a)([Object(wt.e)(s.addOrOpenListByNameAction,Wt),Object(wt.e)(s.checkAndSaveAction,Vt),Object(wt.e)(s.moveToListAction,$t),Object(wt.e)(s.copyToListAction,Qt),Object(wt.e)(s.moveToListByNameAction,Zt),Object(wt.e)(s.importListAction,Xt),Object(wt.e)(s.exportListAction,Yt),Object(wt.e)(s.planWeekAction,cn),Object(wt.e)(s.startup,nn),Object(wt.e)(s.openAList,ln),Object(wt.e)(s.reloadListOfLists,sn),Object(wt.e)(s.reloadAList,un),Object(wt.e)(s.collectPastDays,an),Object(wt.e)(s.deleteAList,rn)])];case 1:return e.sent(),[2]}}))}function mn(){var e;return Object(Ve.__generator)(this,(function(t){switch(t.label){case 0:return[4,Object(wt.b)(Bt.lists.callGetListOfList)];case 1:return e=t.sent(),[4,Object(wt.c)(me.done(e))];case 2:return t.sent(),[2]}}))}function hn(e){var t;return Object(Ve.__generator)(this,(function(n){switch(n.label){case 0:return[4,Gt(e)];case 1:return t=n.sent(),[4,Object(wt.c)(he.done(t))];case 2:return n.sent(),[2,t?t.name:null]}}))}function fn(){return Object(Ve.__generator)(this,(function(e){switch(e.label){case 0:return[4,Object(wt.a)([])];case 1:return e.sent(),[2]}}))}function bn(e){var t,n;return Object(Ve.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,Object(wt.b)(Bt.lists.callGetListOfList)];case 1:return t=s.sent(),(n=t.find((function(t){return t.name===e})))?[2,n.id]:[4,Object(wt.b)(Bt.lists.callCreateAList,Ft(e))];case 2:return[2,s.sent().id];case 3:return[4,dn(s.sent())];case 4:return s.sent(),[3,5];case 5:return[2]}}))}function*gn(){yield Object(wt.a)([pn(),fn()])}var Ln=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||g.d;window.onbeforeunload=function(){return"Do you really want to leave ToDo app?"};var On,yn=((On=function(e){var t=Object(At.a)(),n=Object(Ve.__spreadArrays)([t,kt.a],e);return Object(Ve.__assign)(Object(Ve.__assign)({},Object(g.e)(It,Ln(g.a.apply(void 0,n)))),{runSaga:t.run})}([])).runSaga(gn),On);p.render(u.createElement(m.a,{store:yn},u.createElement(Lt,null)),f.appNode),p.render(u.createElement(m.a,{store:yn},u.createElement(Ot,null)),f.statusNode),p.render(u.createElement(m.a,{store:yn},u.createElement(vt,null)),f.userNode)}},[[115,1,2]]]);
//# sourceMappingURL=main.48f6b2ac.chunk.js.map